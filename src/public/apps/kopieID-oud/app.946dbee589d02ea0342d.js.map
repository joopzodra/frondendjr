{"version":3,"sources":["webpack:///app.946dbee589d02ea0342d.js","webpack:///./src/main.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.routing.ts","webpack:///./src/app/upload/upload.component.ts","webpack:///./src/app/canvas-service/canvas.service.ts","webpack:///./src/app/file-service/file.service.ts","webpack:///./src/app/rotate/rotate.component.ts","webpack:///./src/app/draw/draw.component.ts","webpack:///./src/app/text/text.component.ts","webpack:///./src/app/download/download.component.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/bitmapOnCanvas/bitmapOnCanvas.component.ts","webpack:///./src/app/pdfOnCanvas/pdfOnCanvas.component.ts","webpack:///./src/app/drawingOnCanvas/drawingOnCanvas.component.ts","webpack:///./src/app/textOnCanvas/textOnCanvas.component.ts"],"names":["webpackJsonp","0","module","exports","__webpack_require__","platform_browser_dynamic_1","core_1","app_module_1","enableProdMode","platformBrowserDynamic","bootstrapModule","AppModule","337","__decorate","this","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","platform_browser_1","app_routing_1","app_component_1","upload_component_1","rotate_component_1","bitmapOnCanvas_component_1","pdfOnCanvas_component_1","draw_component_1","drawingOnCanvas_component_1","text_component_1","textOnCanvas_component_1","download_component_1","canvas_service_1","file_service_1","NgModule","declarations","AppComponent","UploadComponent","RotateComponent","BitmapOnCanvas","PdfOnCanvas","DrawComponent","DrawingOnCanvas","TextComponent","TextOnCanvas","DownloadComponent","imports","BrowserModule","routing","providers","appRoutingProviders","CanvasService","FileService","bootstrap","338","router_1","appRoutes","path","component","redirectTo","pathMatch","RouterModule","forRoot","400","PDFJS","fileService","canvasService","prototype","onChange","event","_this","inputTarget","srcElement","newFile","files","clearDrawing","showDrawingCanvas","showTextCanvas","rotated","textValue","type","match","loadImg","then","file","setDrawAndTextCanvasses","loadPdf","alert","reader","FileReader","img","Image","readAsDataURL","Promise","resolve","reject","onload","onerror","loadFile","src","result","error","console","log","readAsArrayBuffer","res","typedarray","Uint8Array","getDocument","pdf","getPage","page","Component","template","402","Subject_1","lineWidth","drawCv","textCv","rotateSource","Subject","drawingCanvasShowSource","clearDrawingSource","textCanvasShowSource","clearTextSource","textSource","clearSelectedAreaSource","widthHeightSource","rotate$","asObservable","drawingCanvasShow$","clearDrawing$","textCanvasShow$","clearText$","text$","clearSelectedArea$","widthHeight$","rotate","rotation","next","show","clear","clearText","text","clearSelectedArea","changeWidthHeight","wh","Injectable","403","fileLoaded","changedFile$","useFile","404","rotateLeft","rotateRight","405","setLineWidth","value","406","inputvalue","changeText","407","FS","toBlob","offscreen","document","createElement","viewportScale","download","hasOwnProperty","pdfOnCanvas","HTMLImageElement","bitmapOnCanvas","canv","ctx","getContext","draw","viewport","getViewport","width","height","renderContext","canvasContext","render","promise","layerOnCanvas","data","toDataURL","blob","saveAs","drawImage","layer","scale","ratioSwitched","save","translate","Math","PI","restore","412","router","ngOnInit","events","subscribe","setOrder","url","order","undefined","selector","styles","Router","413","canvasMaxWidth","canvasMaxHeight","canvasParams","computeCanvasParams","setCanvasService","canvasView","nativeElement","putOnCanvas","window","setTimeout","canvasWidth","canvasHeight","actualWidth","actualHeight","canvas","drawImg","ViewChild","414","fileSubscription","rotateSubscription","pdfWidth","view","pdfHeight","zoom","zoomRatioSwitched","style","border","415","started","toString","substring","currentUrl","ngAfterViewInit","showSubscription","setupCanvasses","clearSubscription","clearCanvasServiceDrawCv","temp_cv","temp","temp_ctx","view_cv","view_ctx","startLine","ev","x0","offsetX","y0","offsetY","drawLine","clearRect","beginPath","moveTo","lineCap","lineTo","stroke","closePath","mouseEventCache","endLine","img_update","updateCanvasServiceDrawCv","onMouseup","HostListener","Function","416","clearCanvasServiceTextCv","textSubscription","updateCanvasServiceTextCv","clearSelectedAreaSubscription","w","h","temprect_cv","temprect_ctx","rect_cv","rect","rect_ctx","text_cv","textcanvas","text_ctx","textAlign","textBaseline","textAreaDimensions","computeTextDimensions","adjustTextAreaDimensions","startSelection","dragSelection","fillStyle","fillRect","endSelection","rect_update","x1","y1","x2","y2","x","min","y","abs","angle","atan","diagonal","sqrt","fontSize","font","datum","Date","toLocaleDateString","maxCharsPerLine","breakString","join","breakStringRegExp","RegExp","fillText","text1","text2","417"],"mappings":"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","file":"app.946dbee589d02ea0342d.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t///<reference path=\"../typings/index.d.ts\"/>\n\t\"use strict\";\n\tvar platform_browser_dynamic_1 = __webpack_require__(1);\n\tvar core_1 = __webpack_require__(11);\n\tvar app_module_1 = __webpack_require__(337);\n\tif (true) {\n\t    core_1.enableProdMode();\n\t}\n\tplatform_browser_dynamic_1.platformBrowserDynamic().bootstrapModule(app_module_1.AppModule);\n\n\n/***/ },\n\n/***/ 337:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar platform_browser_1 = __webpack_require__(203);\n\tvar app_routing_1 = __webpack_require__(338);\n\tvar app_component_1 = __webpack_require__(412);\n\tvar upload_component_1 = __webpack_require__(400);\n\tvar rotate_component_1 = __webpack_require__(404);\n\tvar bitmapOnCanvas_component_1 = __webpack_require__(413);\n\tvar pdfOnCanvas_component_1 = __webpack_require__(414);\n\tvar draw_component_1 = __webpack_require__(405);\n\tvar drawingOnCanvas_component_1 = __webpack_require__(415);\n\tvar text_component_1 = __webpack_require__(406);\n\tvar textOnCanvas_component_1 = __webpack_require__(416);\n\tvar download_component_1 = __webpack_require__(407);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar file_service_1 = __webpack_require__(403);\n\t__webpack_require__(417);\n\tvar AppModule = (function () {\n\t    function AppModule() {\n\t    }\n\t    AppModule = __decorate([\n\t        core_1.NgModule({\n\t            declarations: [\n\t                app_component_1.AppComponent,\n\t                upload_component_1.UploadComponent,\n\t                rotate_component_1.RotateComponent,\n\t                bitmapOnCanvas_component_1.BitmapOnCanvas,\n\t                pdfOnCanvas_component_1.PdfOnCanvas,\n\t                draw_component_1.DrawComponent,\n\t                drawingOnCanvas_component_1.DrawingOnCanvas,\n\t                text_component_1.TextComponent,\n\t                textOnCanvas_component_1.TextOnCanvas,\n\t                download_component_1.DownloadComponent\n\t            ],\n\t            imports: [\n\t                platform_browser_1.BrowserModule,\n\t                app_routing_1.routing\n\t            ],\n\t            providers: [\n\t                app_routing_1.appRoutingProviders,\n\t                canvas_service_1.CanvasService,\n\t                file_service_1.FileService\n\t            ],\n\t            bootstrap: [app_component_1.AppComponent]\n\t        }), \n\t        __metadata('design:paramtypes', [])\n\t    ], AppModule);\n\t    return AppModule;\n\t}());\n\texports.AppModule = AppModule;\n\n\n/***/ },\n\n/***/ 338:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar router_1 = __webpack_require__(339);\n\tvar upload_component_1 = __webpack_require__(400);\n\tvar rotate_component_1 = __webpack_require__(404);\n\tvar draw_component_1 = __webpack_require__(405);\n\tvar text_component_1 = __webpack_require__(406);\n\tvar download_component_1 = __webpack_require__(407);\n\tvar appRoutes = [\n\t    { path: 'upload', component: upload_component_1.UploadComponent },\n\t    { path: 'rotate', component: rotate_component_1.RotateComponent },\n\t    { path: 'draw', component: draw_component_1.DrawComponent },\n\t    { path: 'text', component: text_component_1.TextComponent },\n\t    { path: 'download', component: download_component_1.DownloadComponent },\n\t    {\n\t        path: '',\n\t        redirectTo: '/upload',\n\t        pathMatch: 'full'\n\t    },\n\t    {\n\t        path: '**',\n\t        redirectTo: '/upload'\n\t    }\n\t];\n\texports.appRoutingProviders = [];\n\texports.routing = router_1.RouterModule.forRoot(appRoutes);\n\n\n/***/ },\n\n/***/ 400:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\t//import PDFJS from 'pdfjs-dist'; //Typescript herkent deze module niet\n\tvar PDFJS = __webpack_require__(401);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar file_service_1 = __webpack_require__(403);\n\tvar UploadComponent = (function () {\n\t    function UploadComponent(fileService, canvasService) {\n\t        this.fileService = fileService;\n\t        this.canvasService = canvasService;\n\t    }\n\t    ;\n\t    UploadComponent.prototype.onChange = function (event) {\n\t        var _this = this;\n\t        var inputTarget = event.target || event.srcElement; //browser compatibility\n\t        var newFile = (inputTarget).files[0];\n\t        if (!newFile) {\n\t            return;\n\t        }\n\t        this.canvasService.clearDrawing(true);\n\t        this.canvasService.showDrawingCanvas(false);\n\t        this.canvasService.showTextCanvas(false);\n\t        this.canvasService.rotated = 0;\n\t        this.canvasService.textValue = '';\n\t        if (newFile.type.match('image.*')) {\n\t            return this.loadImg(newFile)\n\t                .then(function (file) {\n\t                _this.setDrawAndTextCanvasses();\n\t                return file;\n\t            });\n\t        }\n\t        else if (newFile.type.match('application/pdf') || newFile.type.match('application/force-download')) {\n\t            return this.loadPdf(newFile)\n\t                .then(function (file) {\n\t                _this.setDrawAndTextCanvasses();\n\t                return file;\n\t            });\n\t        }\n\t        else {\n\t            alert('Je hebt geen afbeeldingsbestand of pdf gekozen. Kies opnieuw.');\n\t        }\n\t    };\n\t    UploadComponent.prototype.loadImg = function (newFile) {\n\t        var _this = this;\n\t        var reader = new FileReader();\n\t        var img = new Image();\n\t        reader.readAsDataURL(newFile);\n\t        return new Promise(function (resolve, reject) {\n\t            reader.onload = resolve;\n\t            reader.onerror = reject;\n\t        })\n\t            .then(function (event) {\n\t            img.onload = function () { return _this.fileService.loadFile(img); };\n\t            img.src = event[\"target\"].result;\n\t            return img;\n\t        })\n\t            .catch(function (error) { return console.log(error); });\n\t    };\n\t    UploadComponent.prototype.loadPdf = function (newFile) {\n\t        var _this = this;\n\t        var reader = new FileReader();\n\t        reader.readAsArrayBuffer(newFile);\n\t        return new Promise(function (resolve, reject) {\n\t            reader.onload = resolve;\n\t            reader.onerror = reject;\n\t        })\n\t            .then(function (event) {\n\t            var res = event[\"target\"].result;\n\t            var typedarray = new Uint8Array(res);\n\t            return PDFJS.getDocument(typedarray); //PDFJS.getDocument is promise\n\t        })\n\t            .then(function (pdf) { return pdf.getPage(1); })\n\t            .then(function (page) {\n\t            _this.fileService.loadFile(page);\n\t            return page;\n\t        })\n\t            .catch(function (error) { return console.log(error); });\n\t    };\n\t    UploadComponent.prototype.setDrawAndTextCanvasses = function () {\n\t        this.canvasService.showDrawingCanvas(true);\n\t        this.canvasService.showTextCanvas(true);\n\t    };\n\t    UploadComponent = __decorate([\n\t        core_1.Component({\n\t            template: \"\\n  <p>Upload een afbeelding (jpg, png) of pdf van je ID naar de browser.</p>\\n  <p class=\\\"toelichting\\\">Het bestand dat je straks downloadt heeft  dezelfde afmetingen als het geuploade bestand.</p>\\n  <div class=\\\"fileUpload\\\">\\n  <label for=\\\"upload-button\\\" class=\\\"topcoat-button--large\\\">Bestand kiezen ...</label>\\n  <input id=\\\"upload-button\\\" type=\\\"file\\\" accept='image/*,application/pdf' (change)=\\\"onChange($event)\\\">\\n  </div>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [file_service_1.FileService, canvas_service_1.CanvasService])\n\t    ], UploadComponent);\n\t    return UploadComponent;\n\t}());\n\texports.UploadComponent = UploadComponent;\n\t//test if (img instanceof HTMLImageElement)\n\t//test if (page.hasOwnProperty(\"pageIndex\"))\n\n\n/***/ },\n\n/***/ 402:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar Subject_1 = __webpack_require__(69);\n\tvar CanvasService = (function () {\n\t    function CanvasService() {\n\t        this.rotated = 0;\n\t        this.lineWidth = 10;\n\t        this.drawCv = null;\n\t        this.textCv = null;\n\t        this.textValue = '';\n\t        // Observable string sources\n\t        this.rotateSource = new Subject_1.Subject();\n\t        this.drawingCanvasShowSource = new Subject_1.Subject();\n\t        this.clearDrawingSource = new Subject_1.Subject();\n\t        this.textCanvasShowSource = new Subject_1.Subject();\n\t        this.clearTextSource = new Subject_1.Subject();\n\t        this.textSource = new Subject_1.Subject();\n\t        this.clearSelectedAreaSource = new Subject_1.Subject();\n\t        this.widthHeightSource = new Subject_1.Subject();\n\t        //Observable string streams\n\t        this.rotate$ = this.rotateSource.asObservable();\n\t        this.drawingCanvasShow$ = this.drawingCanvasShowSource.asObservable();\n\t        this.clearDrawing$ = this.clearDrawingSource.asObservable();\n\t        this.textCanvasShow$ = this.textCanvasShowSource.asObservable();\n\t        this.clearText$ = this.clearTextSource.asObservable();\n\t        this.text$ = this.textSource.asObservable();\n\t        this.clearSelectedArea$ = this.clearSelectedAreaSource.asObservable();\n\t        this.widthHeight$ = this.widthHeightSource.asObservable();\n\t    }\n\t    // Service message commands\n\t    CanvasService.prototype.rotate = function (rotation) {\n\t        this.rotated = this.rotated + rotation;\n\t        this.rotateSource.next(this.rotated);\n\t    };\n\t    CanvasService.prototype.showDrawingCanvas = function (show) {\n\t        this.drawingCanvasShowSource.next(show);\n\t    };\n\t    CanvasService.prototype.clearDrawing = function (clear) {\n\t        this.clearDrawingSource.next(clear);\n\t    };\n\t    CanvasService.prototype.showTextCanvas = function (show) {\n\t        this.textCanvasShowSource.next(show);\n\t    };\n\t    CanvasService.prototype.clearText = function (clear) {\n\t        this.clearTextSource.next(clear);\n\t        this.textValue = '';\n\t    };\n\t    CanvasService.prototype.text = function (text) {\n\t        this.textSource.next(text);\n\t        this.textValue = text;\n\t    };\n\t    CanvasService.prototype.clearSelectedArea = function (clear) {\n\t        this.clearSelectedAreaSource.next(clear);\n\t    };\n\t    CanvasService.prototype.changeWidthHeight = function (wh) {\n\t        this.widthHeightSource.next(wh);\n\t    };\n\t    CanvasService = __decorate([\n\t        core_1.Injectable(), \n\t        __metadata('design:paramtypes', [])\n\t    ], CanvasService);\n\t    return CanvasService;\n\t}());\n\texports.CanvasService = CanvasService;\n\n\n/***/ },\n\n/***/ 403:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar Subject_1 = __webpack_require__(69);\n\tvar FileService = (function () {\n\t    function FileService() {\n\t        this.file = new Subject_1.Subject();\n\t        this.fileLoaded = false;\n\t        this.changedFile$ = this.file.asObservable();\n\t    }\n\t    FileService.prototype.loadFile = function (file) {\n\t        this.useFile = file;\n\t        this.fileLoaded = true;\n\t        this.file.next(file);\n\t    };\n\t    FileService = __decorate([\n\t        core_1.Injectable(), \n\t        __metadata('design:paramtypes', [])\n\t    ], FileService);\n\t    return FileService;\n\t}());\n\texports.FileService = FileService;\n\n\n/***/ },\n\n/***/ 404:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar file_service_1 = __webpack_require__(403);\n\tvar RotateComponent = (function () {\n\t    function RotateComponent(fileService, canvasService) {\n\t        this.fileService = fileService;\n\t        this.canvasService = canvasService;\n\t        this.show = this.fileService.fileLoaded;\n\t    }\n\t    ;\n\t    RotateComponent.prototype.rotateLeft = function () {\n\t        this.canvasService.rotate(-90);\n\t    };\n\t    RotateComponent.prototype.rotateRight = function () {\n\t        this.canvasService.rotate(90);\n\t    };\n\t    RotateComponent = __decorate([\n\t        core_1.Component({\n\t            template: \"\\n  <div *ngIf=\\\"show\\\">\\n    <p>Eventueel kun je de afbeelding roteren.</p>\\n    <p class=\\\"toelichting\\\">Het bestand dat je straks downloadt is niet geroteerd. Roteren is alleen om het bewerken in deze app te vergemakkelijken.</p>\\n    <button class=\\\"topcoat-button--large\\\" (click)=\\\"rotateLeft()\\\">Roteer linksom</button>\\n    <button class=\\\"topcoat-button--large\\\" (click)=\\\"rotateRight()\\\">Roteer rechtsom</button>\\n  </div>\\n  <p class=\\\"alert\\\" *ngIf=\\\"!show\\\">Je hebt nog geen afbeelding of pdf ge-upload.</p>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [file_service_1.FileService, canvas_service_1.CanvasService])\n\t    ], RotateComponent);\n\t    return RotateComponent;\n\t}());\n\texports.RotateComponent = RotateComponent;\n\n\n/***/ },\n\n/***/ 405:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar file_service_1 = __webpack_require__(403);\n\tvar DrawComponent = (function () {\n\t    function DrawComponent(canvasService, fileService) {\n\t        this.canvasService = canvasService;\n\t        this.fileService = fileService;\n\t        this.show = this.fileService.fileLoaded;\n\t    }\n\t    ;\n\t    DrawComponent.prototype.clear = function () {\n\t        this.canvasService.clearDrawing(true);\n\t    };\n\t    DrawComponent.prototype.setLineWidth = function (value) {\n\t        this.canvasService.lineWidth = value;\n\t    };\n\t    DrawComponent = __decorate([\n\t        core_1.Component({\n\t            template: \"\\n  <div *ngIf=\\\"show\\\">\\n    <p>Trek met de muis een streep door je burger-servicenummer. Je moet de twee getypte, paginabrede regels onderaan je ID hebben. (In oudere paspoorten staat het BSN ook nog in rechts in het midden.)</p>\\n    <button class=\\\"topcoat-button\\\" (click)=\\\"clear()\\\">Wis lijnen </button>\\n    <label for=\\\"lijndikte\\\">Pas lijndikte aan:</label>\\n      <input id=\\\"lijndikte\\\" class=\\\"topcoat-range\\\" #input *ngIf=\\\"show\\\" type=\\\"range\\\" min=\\\"4\\\" max=\\\"25\\\" value=\\\"10\\\" (change)=\\\"setLineWidth(input.value)\\\">\\n  </div>\\n  <p class=\\\"alert\\\" *ngIf=\\\"!show\\\">Je hebt nog geen afbeelding of pdf ge-upload.</p>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [canvas_service_1.CanvasService, file_service_1.FileService])\n\t    ], DrawComponent);\n\t    return DrawComponent;\n\t}());\n\texports.DrawComponent = DrawComponent;\n\n\n/***/ },\n\n/***/ 406:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar file_service_1 = __webpack_require__(403);\n\tvar TextComponent = (function () {\n\t    function TextComponent(canvasService, fileService) {\n\t        this.canvasService = canvasService;\n\t        this.fileService = fileService;\n\t        this.show = this.fileService.fileLoaded;\n\t        this.inputvalue = this.canvasService.textValue;\n\t    }\n\t    ;\n\t    TextComponent.prototype.clearText = function () {\n\t        this.canvasService.clearText(true);\n\t        this.inputvalue = '';\n\t    };\n\t    TextComponent.prototype.changeText = function (value) {\n\t        this.canvasService.text(value);\n\t    };\n\t    TextComponent.prototype.clearSelectedArea = function () {\n\t        this.canvasService.clearSelectedArea(true);\n\t    };\n\t    TextComponent = __decorate([\n\t        core_1.Component({\n\t            template: \"\\n  <div *ngIf=\\\"show\\\">\\n    <p>In het watermerk kun je aangeven voor wie de kopie van je ID bestemd is en waarvoor de kopie nodig is. De datum wordt automatisch toegevoegd.</p>\\n    <p class=\\\"toelichting\\\">Bijvoorbeeld: 'Kopie voor verhuurbedrijf Jansen & Janssens, bestemd als identificatie bij de huur van een feesttent.'\\n    <p>Om het gebied te verkleinen waar de tekst overheen komt: sleep met de muis.</p>\\n      <textarea class=\\\"topcoat-textarea\\\" [attr.rows]=\\\"4\\\" [attr.cols]=\\\"28\\\" #input [value]=\\\"inputvalue\\\"  (keyup)=\\\"changeText(input.value)\\\" placeholder=\\\"Tik je watermerk-tekst ...\\\"></textarea>\\n    <input class=\\\"topcoat-button\\\" type=\\\"reset\\\" (click)=\\\"clearText()\\\" value=\\\"Wis tekst\\\">\\n    <button class=\\\"topcoat-button\\\" (click)=\\\"clearSelectedArea()\\\">Wis geselecteerde gebied</button>\\n  </div>\\n  <p class=\\\"alert\\\" *ngIf=\\\"!show\\\">Je hebt nog geen afbeelding of pdf ge-upload.</p>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [canvas_service_1.CanvasService, file_service_1.FileService])\n\t    ], TextComponent);\n\t    return TextComponent;\n\t}());\n\texports.TextComponent = TextComponent;\n\n\n/***/ },\n\n/***/ 407:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar FS = __webpack_require__(408);\n\tvar toBlob = __webpack_require__(411);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar file_service_1 = __webpack_require__(403);\n\tvar DownloadComponent = (function () {\n\t    function DownloadComponent(fileService, canvasService) {\n\t        this.fileService = fileService;\n\t        this.canvasService = canvasService;\n\t        this.offscreen = document.createElement('canvas');\n\t        this.viewportScale = 1;\n\t        this.file = this.fileService.useFile;\n\t    }\n\t    ;\n\t    DownloadComponent.prototype.download = function () {\n\t        if (this.file) {\n\t            if (this.file.hasOwnProperty('pageIndex')) {\n\t                this.pdfOnCanvas();\n\t            }\n\t            if (this.file instanceof HTMLImageElement) {\n\t                this.bitmapOnCanvas();\n\t            }\n\t        }\n\t    };\n\t    DownloadComponent.prototype.pdfOnCanvas = function () {\n\t        var _this = this;\n\t        var pdf = this.file;\n\t        var canv = this.offscreen;\n\t        var ctx = canv.getContext('2d');\n\t        var draw = this.canvasService.drawCv;\n\t        var text = this.canvasService.textCv;\n\t        this.viewportScale = 4.166667;\n\t        var viewport = pdf.getViewport(this.viewportScale);\n\t        canv.width = viewport.width;\n\t        canv.height = viewport.height;\n\t        var renderContext = {\n\t            canvasContext: ctx,\n\t            viewport: viewport\n\t        };\n\t        pdf.render(renderContext)\n\t            .then(function (promise) {\n\t            if (draw)\n\t                _this.layerOnCanvas(draw, ctx);\n\t            if (text)\n\t                _this.layerOnCanvas(text, ctx);\n\t            var data = canv.toDataURL(\"image/jpeg\", 0.6);\n\t            var blob = toBlob(data);\n\t            FS.saveAs(blob, \"kopieID.jpg\");\n\t            return promise;\n\t        });\n\t    };\n\t    DownloadComponent.prototype.bitmapOnCanvas = function () {\n\t        var img = this.file;\n\t        var canv = this.offscreen;\n\t        var ctx = canv.getContext('2d');\n\t        var draw = this.canvasService.drawCv;\n\t        var text = this.canvasService.textCv;\n\t        canv.width = img.width;\n\t        canv.height = img.height;\n\t        ctx.drawImage(img, 0, 0);\n\t        if (draw)\n\t            this.layerOnCanvas(draw, ctx);\n\t        if (text)\n\t            this.layerOnCanvas(text, ctx);\n\t        var data = canv.toDataURL(\"image/jpeg\", 0.6);\n\t        var blob = toBlob(data);\n\t        FS.saveAs(blob, \"kopieID.jpg\");\n\t    };\n\t    DownloadComponent.prototype.layerOnCanvas = function (layer, ctx) {\n\t        var scale = this.viewportScale * (1 / this.canvasService.scale);\n\t        var ratioSwitched = this.canvasService.rotated % 180 !== 0;\n\t        ctx.save();\n\t        ctx.scale(scale, scale);\n\t        if (ratioSwitched === true) {\n\t            ctx.translate(layer.height / 2, layer.width / 2);\n\t            ctx.rotate(-this.canvasService.rotated * Math.PI / 180);\n\t            ctx.translate(-layer.width / 2, -layer.height / 2);\n\t        }\n\t        else {\n\t            ctx.translate(layer.width / 2, layer.height / 2);\n\t            ctx.rotate(-this.canvasService.rotated * Math.PI / 180);\n\t            ctx.translate(-layer.width / 2, -layer.height / 2);\n\t        }\n\t        ctx.drawImage(layer, 0, 0);\n\t        ctx.restore();\n\t    };\n\t    DownloadComponent = __decorate([\n\t        core_1.Component({\n\t            template: \"\\n  <div *ngIf=\\\"file\\\">\\n    <p>Download je bestand. En klaar!</p>\\n    <button class=\\\"topcoat-button--large\\\" (click)=\\\"download()\\\" [disabled]=\\\"!file\\\">Download</button>\\n  </div>\\n  <p class=\\\"alert\\\" *ngIf=\\\"!file\\\">Je hebt nog geen afbeelding of pdf ge-upload.</p>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [file_service_1.FileService, canvas_service_1.CanvasService])\n\t    ], DownloadComponent);\n\t    return DownloadComponent;\n\t}());\n\texports.DownloadComponent = DownloadComponent;\n\n\n/***/ },\n\n/***/ 412:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar router_1 = __webpack_require__(339);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar AppComponent = (function () {\n\t    function AppComponent(canvasService, router) {\n\t        this.canvasService = canvasService;\n\t        this.router = router;\n\t    }\n\t    ;\n\t    AppComponent.prototype.ngOnInit = function () {\n\t        var _this = this;\n\t        this.router.events.subscribe(function (event) {\n\t            _this.setOrder(event.url);\n\t            _this.canvasService.widthHeight$.subscribe(function (wh) {\n\t                _this.width = wh[0] + 'px';\n\t                _this.height = wh[1] + 'px';\n\t            });\n\t        });\n\t    };\n\t    AppComponent.prototype.setOrder = function (url) {\n\t        var order;\n\t        switch (url) {\n\t            case '/upload':\n\t                order = 11;\n\t                break;\n\t            case '/rotate':\n\t                order = 21;\n\t                break;\n\t            case '/draw':\n\t                order = 31;\n\t                break;\n\t            case '/text':\n\t                order = 41;\n\t                break;\n\t            case '/download':\n\t                order = 51;\n\t                break;\n\t            default:\n\t                order = 11;\n\t        }\n\t        //event.url fires many times, sometimes it fires undefined; therefore this solution\n\t        if (url !== undefined) {\n\t            this.order = order;\n\t        }\n\t        return { 'order': this.order };\n\t    };\n\t    AppComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'root',\n\t            template: \"\\n  <div id=\\\"app\\\">\\n    <div class=\\\"nav-en-outlet\\\">\\n        <a routerLink=\\\"/upload\\\" routerLinkActive=\\\"active\\\">Uploaden</a>\\n        <a routerLink=\\\"/rotate\\\" routerLinkActive=\\\"active\\\">Roteren</a>\\n        <a routerLink=\\\"/draw\\\" routerLinkActive=\\\"active\\\">Burgerservicenummer verbergen</a>\\n        <a routerLink=\\\"/text\\\" routerLinkActive=\\\"active\\\">Watermerk toevoegen</a>\\n        <a routerLink=\\\"/download\\\" routerLinkActive=\\\"active\\\">Downloaden</a>\\n      <div class=\\\"router-outlet\\\" [ngStyle]=\\\"setOrder()\\\">\\n        <router-outlet></router-outlet>\\n      </div>\\n    </div>\\n    <div class=\\\"canvas-container\\\" [style.height]=\\\"height\\\">\\n      <bitmap></bitmap>\\n      <pdf></pdf>\\n      <draw></draw> \\n      <text></text>\\n    </div>\\n  </div>\\n  \",\n\t            styles: ['.canvas-container { position: relative }; text { pointer-events: none }']\n\t        }), \n\t        __metadata('design:paramtypes', [canvas_service_1.CanvasService, router_1.Router])\n\t    ], AppComponent);\n\t    return AppComponent;\n\t}());\n\texports.AppComponent = AppComponent;\n\n\n/***/ },\n\n/***/ 413:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar file_service_1 = __webpack_require__(403);\n\tvar BitmapOnCanvas = (function () {\n\t    function BitmapOnCanvas(fileService, canvasService) {\n\t        this.fileService = fileService;\n\t        this.canvasService = canvasService;\n\t        this.show = false;\n\t        this.canvasMaxWidth = 750;\n\t        this.canvasMaxHeight = 900;\n\t    }\n\t    ;\n\t    BitmapOnCanvas.prototype.ngOnInit = function () {\n\t        var _this = this;\n\t        this.fileService.changedFile$.subscribe(function (file) {\n\t            console.log('file');\n\t            _this.file = file;\n\t            if (file instanceof HTMLImageElement) {\n\t                //this.show = true;\n\t                var rotated = 0;\n\t                var canvasParams = _this.computeCanvasParams(file, rotated);\n\t                _this.setCanvasService(canvasParams.width, canvasParams.height, canvasParams.scale);\n\t                _this.canv = _this.canvasView.nativeElement;\n\t                _this.putOnCanvas(file, canvasParams, _this.canv);\n\t            }\n\t            else {\n\t                //this.show = false;        \n\t                //Safari hangs on 'undefined' of canvasView when clearing the canvas with ngIf, even if used in timeout, therefore this workaround\n\t                window.setTimeout(function () {\n\t                    _this.canvasWidth = 0;\n\t                    _this.canvasHeight = 0;\n\t                }, 10);\n\t            }\n\t        });\n\t        this.canvasService.rotate$.subscribe(function (rotate) {\n\t            if (_this.file instanceof HTMLImageElement) {\n\t                var canvasParams = _this.computeCanvasParams(_this.file, rotate);\n\t                _this.setCanvasService(canvasParams.width, canvasParams.height, canvasParams.scale);\n\t                _this.putOnCanvas(_this.file, canvasParams, _this.canv);\n\t            }\n\t        });\n\t    };\n\t    BitmapOnCanvas.prototype.computeCanvasParams = function (file, rotated) {\n\t        //if rotated 90 or -90, toggle width and height \n\t        var ratioSwitched = rotated % 180 !== 0;\n\t        var actualWidth = file.width;\n\t        var actualHeight = file.height;\n\t        if (ratioSwitched) {\n\t            actualWidth = file.height;\n\t            actualHeight = file.width;\n\t        }\n\t        //set scale for canvas context, to prevent image overflow\n\t        //notice that scale will always be <= 1\n\t        var scale = 1;\n\t        if (actualWidth > this.canvasMaxWidth) {\n\t            scale = this.canvasMaxWidth / actualWidth;\n\t        }\n\t        if (scale * actualHeight > this.canvasMaxHeight) {\n\t            scale = this.canvasMaxWidth / actualHeight;\n\t        }\n\t        //if image smaller than canvas max sizes, adjust canvas sizes\n\t        //NB if image smaller than canvas, then scale = 1\n\t        var canvasWidth = scale * actualWidth;\n\t        var canvasHeight = scale * actualHeight;\n\t        return {\n\t            width: canvasWidth,\n\t            height: canvasHeight,\n\t            scale: scale,\n\t            rotated: rotated\n\t        };\n\t    };\n\t    BitmapOnCanvas.prototype.setCanvasService = function (width, height, scale) {\n\t        this.canvasService.scale = scale;\n\t        this.canvasService.height = height;\n\t        this.canvasService.width = width;\n\t        this.canvasService.changeWidthHeight([width, height]);\n\t    };\n\t    BitmapOnCanvas.prototype.putOnCanvas = function (file, canvasParams, canvas) {\n\t        var _this = this;\n\t        var scale = canvasParams.scale;\n\t        var width = canvasParams.width;\n\t        var height = canvasParams.height;\n\t        var rotate = canvasParams.rotated;\n\t        var ratioSwitched = rotate % 180 !== 0;\n\t        var ctx = canvas.getContext('2d');\n\t        this.canvasWidth = width;\n\t        this.canvasHeight = height;\n\t        function drawImg() {\n\t            ctx.translate(width / 2, height / 2);\n\t            ctx.rotate(rotate * Math.PI / 180);\n\t            if (ratioSwitched) {\n\t                ctx.translate(-height / 2, -width / 2);\n\t            }\n\t            else {\n\t                ctx.translate(-width / 2, -height / 2);\n\t            }\n\t            ctx.scale(scale, scale);\n\t            ctx.drawImage(file, 0, 0);\n\t        }\n\t        window.setTimeout(function () {\n\t            _this.canv.width = width; //superfluous in all browsers except Safari\n\t            _this.canv.height = height; //superfluous in all browsers except Safari\n\t            drawImg();\n\t        }, 50); //50ms delay otherwise bitmap not visible in Safari\n\t    };\n\t    __decorate([\n\t        core_1.ViewChild('canvasBitmap'), \n\t        __metadata('design:type', Object)\n\t    ], BitmapOnCanvas.prototype, \"canvasView\", void 0);\n\t    BitmapOnCanvas = __decorate([\n\t        core_1.Component({\n\t            selector: 'bitmap',\n\t            template: \"<canvas id=\\\"canvas-bitmap\\\" #canvasBitmap [attr.width]=\\\"canvasWidth\\\" [attr.height]=\\\"canvasHeight\\\">Je browser is niet geschikt deze webtool.</canvas>\",\n\t            styles: ['canvas { position: absolute }']\n\t        }), \n\t        __metadata('design:paramtypes', [file_service_1.FileService, canvas_service_1.CanvasService])\n\t    ], BitmapOnCanvas);\n\t    return BitmapOnCanvas;\n\t}());\n\texports.BitmapOnCanvas = BitmapOnCanvas;\n\n\n/***/ },\n\n/***/ 414:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar file_service_1 = __webpack_require__(403);\n\tvar PdfOnCanvas = (function () {\n\t    function PdfOnCanvas(canvasService, fileService) {\n\t        this.canvasService = canvasService;\n\t        this.fileService = fileService;\n\t        this.show = false;\n\t        this.canvasWidth = 750;\n\t        this.rotate = 0;\n\t    }\n\t    ;\n\t    PdfOnCanvas.prototype.ngOnInit = function () {\n\t        var _this = this;\n\t        this.fileSubscription = this.fileService.changedFile$.subscribe(function (file) {\n\t            if (file.hasOwnProperty('pageIndex')) {\n\t                _this.show = true;\n\t                _this.file = file;\n\t                window.setTimeout(function () { return _this.putOnCanvas(file); }, 0);\n\t            }\n\t            else {\n\t                _this.show = false;\n\t                _this.file = file;\n\t            }\n\t        });\n\t        this.rotateSubscription = this.canvasService.rotate$.subscribe(function (rotate) {\n\t            if (_this.file.hasOwnProperty('pageIndex')) {\n\t                _this.putOnCanvas(_this.file);\n\t            }\n\t        });\n\t    };\n\t    PdfOnCanvas.prototype.putOnCanvas = function (file) {\n\t        var pdfWidth = file.view[2];\n\t        var pdfHeight = file.view[3];\n\t        var ratioSwitched = this.canvasService.rotated % 180 !== 0;\n\t        var zoom = pdfWidth < this.canvasWidth ? 1 : this.canvasWidth / pdfWidth;\n\t        var zoomRatioSwitched = pdfHeight < this.canvasWidth ? 1 : this.canvasWidth / pdfHeight;\n\t        var scale = ratioSwitched ? zoomRatioSwitched : zoom;\n\t        this.canvasHeight = ratioSwitched ? zoomRatioSwitched * pdfWidth : zoom * pdfHeight;\n\t        this.canvasService.scale = scale;\n\t        this.canvasService.height = this.canvasHeight;\n\t        if (!ratioSwitched) {\n\t            this.canvasService.width = pdfWidth < this.canvasWidth ? pdfWidth : this.canvasWidth;\n\t        }\n\t        else {\n\t            this.canvasService.width = (pdfHeight < this.canvasWidth) ? pdfHeight : this.canvasWidth;\n\t        }\n\t        var canv = this.canvas.nativeElement;\n\t        var ctx = canv.getContext('2d');\n\t        var viewport = file.getViewport(scale, this.canvasService.rotated);\n\t        canv.width = viewport.width;\n\t        canv.height = viewport.height;\n\t        canv.style.border = \"1px solid black\";\n\t        var renderContext = {\n\t            canvasContext: ctx,\n\t            viewport: viewport\n\t        };\n\t        file.render(renderContext);\n\t        this.canvasService.changeWidthHeight([viewport.width, viewport.height]);\n\t    };\n\t    __decorate([\n\t        core_1.ViewChild('canvas'), \n\t        __metadata('design:type', Object)\n\t    ], PdfOnCanvas.prototype, \"canvas\", void 0);\n\t    PdfOnCanvas = __decorate([\n\t        core_1.Component({\n\t            selector: 'pdf',\n\t            template: \"\\n  <canvas *ngIf=\\\"show\\\" #canvas>Je browser is niet geschikt deze webtool.</canvas>\\n  \",\n\t            styles: ['canvas { position: absolute }']\n\t        }), \n\t        __metadata('design:paramtypes', [canvas_service_1.CanvasService, file_service_1.FileService])\n\t    ], PdfOnCanvas);\n\t    return PdfOnCanvas;\n\t}());\n\texports.PdfOnCanvas = PdfOnCanvas;\n\n\n/***/ },\n\n/***/ 415:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar router_1 = __webpack_require__(339);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar DrawingOnCanvas = (function () {\n\t    function DrawingOnCanvas(canvasService, router) {\n\t        this.canvasService = canvasService;\n\t        this.router = router;\n\t        this.show = false;\n\t        this.started = false;\n\t    }\n\t    ;\n\t    DrawingOnCanvas.prototype.ngOnInit = function () {\n\t        var _this = this;\n\t        this.router.events.subscribe(function (event) {\n\t            if (event.toString().substring(0, 13) === 'NavigationEnd') {\n\t                _this.currentUrl = event.url;\n\t            }\n\t        });\n\t    };\n\t    DrawingOnCanvas.prototype.ngAfterViewInit = function () {\n\t        var _this = this;\n\t        this.showSubscription = this.canvasService.drawingCanvasShow$.subscribe(function (show) {\n\t            _this.show = show;\n\t            if (show == true) {\n\t                window.setTimeout(function () { return _this.setupCanvasses(); }, 250); //delay needed for Firefox, bitmapOnCanvas delays 50ms, setup this canvas thereafter\n\t            }\n\t        });\n\t        this.clearSubscription = this.canvasService.clearDrawing$.subscribe(function (clear) {\n\t            _this.clear();\n\t            _this.clearCanvasServiceDrawCv();\n\t        });\n\t        this.rotateSubscription = this.canvasService.rotate$.subscribe(function (rotate) {\n\t            if (_this.show == true) {\n\t                _this.clear();\n\t                _this.clearCanvasServiceDrawCv();\n\t                _this.setupCanvasses();\n\t            }\n\t        });\n\t    };\n\t    DrawingOnCanvas.prototype.setupCanvasses = function () {\n\t        this.temp_cv = this.temp.nativeElement;\n\t        this.temp_cv.width = this.canvasService.width;\n\t        this.temp_cv.height = this.canvasService.height;\n\t        this.temp_ctx = this.temp_cv.getContext('2d');\n\t        this.view_cv = this.view.nativeElement;\n\t        this.view_cv.width = this.canvasService.width;\n\t        this.view_cv.height = this.canvasService.height;\n\t        this.view_ctx = this.view_cv.getContext('2d');\n\t    };\n\t    ;\n\t    DrawingOnCanvas.prototype.startLine = function (ev) {\n\t        this.started = true;\n\t        this.x0 = ev.offsetX;\n\t        this.y0 = ev.offsetY;\n\t    };\n\t    ;\n\t    DrawingOnCanvas.prototype.drawLine = function (ev) {\n\t        if (!this.started) {\n\t            return;\n\t        }\n\t        this.temp_ctx.clearRect(0, 0, this.temp_cv.width, this.temp_cv.height);\n\t        this.temp_ctx.beginPath();\n\t        this.temp_ctx.moveTo(this.x0, this.y0);\n\t        this.temp_ctx.lineWidth = this.canvasService.lineWidth;\n\t        this.temp_ctx.lineCap = 'round';\n\t        this.temp_ctx.lineTo(ev.offsetX, ev.offsetY);\n\t        this.temp_ctx.stroke();\n\t        this.temp_ctx.closePath();\n\t        this.mouseEventCache = ev;\n\t    };\n\t    ;\n\t    DrawingOnCanvas.prototype.endLine = function (ev) {\n\t        if (this.started) {\n\t            //this.drawLine(ev);\n\t            this.started = false;\n\t            this.img_update();\n\t            this.updateCanvasServiceDrawCv();\n\t        }\n\t    };\n\t    ;\n\t    DrawingOnCanvas.prototype.onMouseup = function (event) {\n\t        this.endLine(this.mouseEventCache);\n\t    };\n\t    DrawingOnCanvas.prototype.img_update = function () {\n\t        this.view_ctx.drawImage(this.temp_cv, 0, 0);\n\t        this.temp_ctx.clearRect(0, 0, this.temp_cv.width, this.temp_cv.height);\n\t        return this.temp_cv;\n\t    };\n\t    DrawingOnCanvas.prototype.clear = function () {\n\t        if (this.view_ctx) {\n\t            this.view_ctx.clearRect(0, 0, this.temp_cv.width, this.temp_cv.height);\n\t        }\n\t    };\n\t    DrawingOnCanvas.prototype.updateCanvasServiceDrawCv = function () {\n\t        this.canvasService.drawCv = this.view_cv;\n\t    };\n\t    DrawingOnCanvas.prototype.clearCanvasServiceDrawCv = function () {\n\t        this.canvasService.drawCv = null;\n\t    };\n\t    __decorate([\n\t        core_1.ViewChild('temp'), \n\t        __metadata('design:type', Object)\n\t    ], DrawingOnCanvas.prototype, \"temp\", void 0);\n\t    __decorate([\n\t        core_1.ViewChild('view'), \n\t        __metadata('design:type', Object)\n\t    ], DrawingOnCanvas.prototype, \"view\", void 0);\n\t    __decorate([\n\t        core_1.HostListener('document:mouseup', ['$event']), \n\t        __metadata('design:type', Function), \n\t        __metadata('design:paramtypes', [Object]), \n\t        __metadata('design:returntype', void 0)\n\t    ], DrawingOnCanvas.prototype, \"onMouseup\", null);\n\t    DrawingOnCanvas = __decorate([\n\t        core_1.Component({\n\t            selector: 'draw',\n\t            template: \"\\n  <div *ngIf=\\\"show\\\">\\n  <canvas #view></canvas>\\n  <canvas id=\\\"temp\\\" #temp (mousedown)=\\\"startLine($event)\\\" (mousemove)=\\\"drawLine($event)\\\" (mouseup)=\\\"endLine($event)\\\" [style.pointer-events]=\\\"currentUrl ==='/draw' ? 'auto' : 'none' \\\"></canvas>\\n  </div>\\n  \",\n\t            styles: ['canvas { position: absolute }']\n\t        }), \n\t        __metadata('design:paramtypes', [canvas_service_1.CanvasService, router_1.Router])\n\t    ], DrawingOnCanvas);\n\t    return DrawingOnCanvas;\n\t}());\n\texports.DrawingOnCanvas = DrawingOnCanvas;\n\n\n/***/ },\n\n/***/ 416:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n\t};\n\tvar core_1 = __webpack_require__(11);\n\tvar router_1 = __webpack_require__(339);\n\tvar canvas_service_1 = __webpack_require__(402);\n\tvar TextOnCanvas = (function () {\n\t    function TextOnCanvas(canvasService, router) {\n\t        this.canvasService = canvasService;\n\t        this.router = router;\n\t        this.show = false;\n\t        this.started = false;\n\t    }\n\t    ;\n\t    TextOnCanvas.prototype.ngOnInit = function () {\n\t        var _this = this;\n\t        this.router.events.subscribe(function (event) {\n\t            if (event.toString().substring(0, 13) === 'NavigationEnd') {\n\t                _this.currentUrl = event.url;\n\t            }\n\t        });\n\t    };\n\t    TextOnCanvas.prototype.ngAfterViewInit = function () {\n\t        var _this = this;\n\t        this.showSubscription = this.canvasService.textCanvasShow$.subscribe(function (show) {\n\t            _this.show = show;\n\t            if (show == true) {\n\t                window.setTimeout(function () { return _this.setupCanvasses(); }, 250); //delay needed for Firefox, bitmapOnCanvas delays 50ms, setup this canvas thereafter\n\t            }\n\t        });\n\t        this.clearSubscription = this.canvasService.clearText$.subscribe(function (clear) {\n\t            _this.clearText();\n\t            //this.text = '';\n\t            _this.clearCanvasServiceTextCv();\n\t        });\n\t        this.rotateSubscription = this.canvasService.rotate$.subscribe(function (rotate) {\n\t            if (_this.show == true) {\n\t                _this.clearText();\n\t                _this.clearCanvasServiceTextCv();\n\t                _this.clearSelectedArea();\n\t                _this.setupCanvasses();\n\t            }\n\t        });\n\t        this.textSubscription = this.canvasService.text$.subscribe(function (text) {\n\t            _this.clearText();\n\t            _this.img_update(text);\n\t            //this.text = text;\n\t            _this.updateCanvasServiceTextCv();\n\t        });\n\t        this.clearSelectedAreaSubscription = this.canvasService.clearSelectedArea$.subscribe(function (clear) {\n\t            _this.clearSelectedArea();\n\t        });\n\t    };\n\t    TextOnCanvas.prototype.setupCanvasses = function () {\n\t        var w = this.canvasService.width;\n\t        var h = this.canvasService.height;\n\t        this.temprect_cv = this.temp.nativeElement;\n\t        this.temprect_cv.width = w;\n\t        this.temprect_cv.height = h;\n\t        this.temprect_ctx = this.temprect_cv.getContext('2d');\n\t        this.rect_cv = this.rect.nativeElement;\n\t        this.rect_cv.width = w;\n\t        this.rect_cv.height = h;\n\t        this.rect_ctx = this.rect_cv.getContext('2d');\n\t        this.text_cv = this.textcanvas.nativeElement;\n\t        this.text_cv.width = w;\n\t        this.text_cv.height = h;\n\t        this.text_ctx = this.text_cv.getContext('2d');\n\t        this.text_ctx.textAlign = 'center';\n\t        this.text_ctx.textBaseline = 'middle';\n\t        //initial textarea dimensions = the whole canvas\n\t        this.canvasService.textAreaDimensions = this.computeTextDimensions(0, 0, w, h);\n\t        this.adjustTextAreaDimensions();\n\t    };\n\t    ;\n\t    ///Set textarea dimensions\n\t    TextOnCanvas.prototype.startSelection = function (ev) {\n\t        this.rect_ctx.clearRect(0, 0, this.rect_cv.width, this.rect_cv.height);\n\t        this.text_ctx.restore();\n\t        this.text_ctx.clearRect(0, 0, this.text_cv.width, this.text_cv.height);\n\t        this.started = true;\n\t        this.x0 = ev.offsetX;\n\t        this.y0 = ev.offsetY;\n\t    };\n\t    ;\n\t    TextOnCanvas.prototype.dragSelection = function (ev) {\n\t        if (!this.started) {\n\t            return;\n\t        }\n\t        this.temprect_ctx.clearRect(0, 0, this.temprect_cv.width, this.temprect_cv.height);\n\t        var width = ev.offsetX - this.x0;\n\t        var height = ev.offsetY - this.y0;\n\t        this.temprect_ctx.fillStyle = 'rgba(0,0,0,0.1)';\n\t        this.temprect_ctx.fillRect(this.x0, this.y0, width, height);\n\t        this.mouseEventCache = ev; //for HostListener\n\t    };\n\t    ;\n\t    TextOnCanvas.prototype.endSelection = function (ev) {\n\t        if (this.started) {\n\t            this.dragSelection(ev);\n\t            this.started = false;\n\t            this.canvasService.textAreaDimensions = this.computeTextDimensions(this.x0, this.y0, ev.offsetX, ev.offsetY);\n\t            this.adjustTextAreaDimensions();\n\t            this.rect_update();\n\t            this.img_update(this.canvasService.textValue);\n\t        }\n\t    };\n\t    ;\n\t    //if mouseup event happens outside canvas, use last on canvas cached mouse event for endSelection\n\t    TextOnCanvas.prototype.onMouseup = function (event) {\n\t        this.endSelection(this.mouseEventCache);\n\t    };\n\t    TextOnCanvas.prototype.computeTextDimensions = function (x1, y1, x2, y2) {\n\t        var x = Math.min(x1, x2);\n\t        var y = Math.min(y1, y2);\n\t        var w = Math.abs(x1 - x2);\n\t        var h = Math.abs(y1 - y2);\n\t        return [x, y, w, h];\n\t    };\n\t    TextOnCanvas.prototype.adjustTextAreaDimensions = function () {\n\t        var x = this.canvasService.textAreaDimensions[0];\n\t        var y = this.canvasService.textAreaDimensions[1];\n\t        var w = this.canvasService.textAreaDimensions[2];\n\t        var h = this.canvasService.textAreaDimensions[3];\n\t        this.text_ctx.save();\n\t        var angle = Math.atan(h / w);\n\t        this.text_ctx.translate(x + w / 2, y + h / 2);\n\t        this.text_ctx.rotate(-angle);\n\t    };\n\t    TextOnCanvas.prototype.rect_update = function () {\n\t        this.rect_ctx.drawImage(this.temprect_cv, 0, 0);\n\t        this.temprect_ctx.clearRect(0, 0, this.temprect_cv.width, this.temprect_cv.height);\n\t    };\n\t    //////Put text on canvas\n\t    TextOnCanvas.prototype.img_update = function (text) {\n\t        var w = this.canvasService.textAreaDimensions[2];\n\t        var h = this.canvasService.textAreaDimensions[3];\n\t        var diagonal = Math.sqrt(w * w + h * h);\n\t        var fontSize = diagonal / 30;\n\t        this.text_ctx.font = fontSize + \"px sans-serif\";\n\t        this.text_ctx.save();\n\t        this.text_ctx.fillStyle = 'rgba(0,0,0,0.2)';\n\t        var datum = '';\n\t        if (this.canvasService.textValue !== '') {\n\t            datum = 'datum: ' + new Date().toLocaleDateString();\n\t        }\n\t        var maxCharsPerLine = 55; //determined manually\n\t        var breakString = ['.{1,', maxCharsPerLine, '}([\\\\.,\\\\s!\\\\?]|$)'].join('');\n\t        var breakStringRegExp = new RegExp(breakString, 'g');\n\t        if (text.length <= maxCharsPerLine) {\n\t            this.text_ctx.fillText(text, 0, 0);\n\t            this.text_ctx.fillText(datum, 0, 1.2 * fontSize);\n\t        }\n\t        else {\n\t            var text1 = text.match(breakStringRegExp)[0]; //.trim();\n\t            var text2 = text.match(breakStringRegExp)[1]; //.trim();\n\t            this.text_ctx.fillText(text1, 0, -1.2 * fontSize);\n\t            this.text_ctx.fillText(text2, 0, 0);\n\t            this.text_ctx.fillText(datum, 0, 1.2 * fontSize);\n\t        }\n\t        this.text_ctx.restore(); //restore fillStyle for selecting text area\n\t    };\n\t    TextOnCanvas.prototype.clearText = function () {\n\t        if (this.text_ctx) {\n\t            this.text_ctx.restore();\n\t            this.text_ctx.clearRect(0, 0, this.text_cv.width, this.text_cv.height);\n\t            this.adjustTextAreaDimensions();\n\t        }\n\t    };\n\t    TextOnCanvas.prototype.clearSelectedArea = function () {\n\t        this.rect_ctx.clearRect(0, 0, this.rect_cv.width, this.rect_cv.height);\n\t        var w = this.text_cv.width;\n\t        var h = this.text_cv.height;\n\t        this.canvasService.textAreaDimensions = this.computeTextDimensions(0, 0, w, h);\n\t        this.clearText(); //after resetting textAreaDimensions, because clearText() uses the textAreaDimensions\n\t        this.img_update(this.canvasService.textValue);\n\t    };\n\t    TextOnCanvas.prototype.updateCanvasServiceTextCv = function () {\n\t        this.canvasService.textCv = this.text_cv;\n\t    };\n\t    TextOnCanvas.prototype.clearCanvasServiceTextCv = function () {\n\t        this.canvasService.textCv = null;\n\t    };\n\t    __decorate([\n\t        core_1.ViewChild('temp'), \n\t        __metadata('design:type', Object)\n\t    ], TextOnCanvas.prototype, \"temp\", void 0);\n\t    __decorate([\n\t        core_1.ViewChild('rect'), \n\t        __metadata('design:type', Object)\n\t    ], TextOnCanvas.prototype, \"rect\", void 0);\n\t    __decorate([\n\t        core_1.ViewChild('textcanvas'), \n\t        __metadata('design:type', Object)\n\t    ], TextOnCanvas.prototype, \"textcanvas\", void 0);\n\t    __decorate([\n\t        core_1.HostListener('document:mouseup', ['$event']), \n\t        __metadata('design:type', Function), \n\t        __metadata('design:paramtypes', [Object]), \n\t        __metadata('design:returntype', void 0)\n\t    ], TextOnCanvas.prototype, \"onMouseup\", null);\n\t    TextOnCanvas = __decorate([\n\t        core_1.Component({\n\t            selector: 'text',\n\t            template: \"\\n  <div *ngIf=\\\"show\\\">\\n    <canvas #rect style=\\\"pointer-events:none\\\"></canvas>\\n    <canvas #textcanvas style=\\\"pointer-events:none\\\"></canvas>\\n    <canvas #temp (mousedown)=\\\"startSelection($event)\\\" (mousemove)=\\\"dragSelection($event)\\\" (mouseup)=\\\"endSelection($event)\\\" [style.pointer-events]=\\\"currentUrl ==='/text' ? 'all' : 'none' \\\"></canvas>\\n  </div>\\n  \",\n\t            styles: ['canvas { position: absolute }']\n\t        }), \n\t        __metadata('design:paramtypes', [canvas_service_1.CanvasService, router_1.Router])\n\t    ], TextOnCanvas);\n\t    return TextOnCanvas;\n\t}());\n\texports.TextOnCanvas = TextOnCanvas;\n\n\n/***/ },\n\n/***/ 417:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** app.946dbee589d02ea0342d.js\n **/","///<reference path=\"../typings/index.d.ts\"/>\n\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { enableProdMode } from '@angular/core';\n\nimport { AppModule } from './app/app.module';\n\nif (process.env.ENV === 'production') {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/main.ts\n **/","import { NgModule }       from '@angular/core';\nimport { BrowserModule  } from '@angular/platform-browser';\n\nimport { routing, appRoutingProviders } from './app.routing';\n\nimport { AppComponent }   from './app.component';\nimport { UploadComponent } from './upload/upload.component';\nimport { RotateComponent } from './rotate/rotate.component';\nimport { BitmapOnCanvas } from './bitmapOnCanvas/bitmapOnCanvas.component';\nimport { PdfOnCanvas } from './pdfOnCanvas/pdfOnCanvas.component';\nimport { DrawComponent } from './draw/draw.component';\nimport { DrawingOnCanvas } from './drawingOnCanvas/drawingOnCanvas.component';\nimport { TextComponent } from './text/text.component';\nimport { TextOnCanvas } from './textOnCanvas/textOnCanvas.component';\nimport { DownloadComponent } from './download/download.component';\n\nimport { CanvasService } from './canvas-service/canvas.service'\nimport { FileService } from './file-service/file.service';\n\nimport '../sass/styles.css';\n\n@NgModule({\n    declarations: [\n      AppComponent,\n      UploadComponent,\n      RotateComponent,\n      BitmapOnCanvas,\n      PdfOnCanvas,\n      DrawComponent,\n      DrawingOnCanvas,\n      TextComponent,\n      TextOnCanvas,\n      DownloadComponent\n    ],\n    imports: [\n      BrowserModule,\n      routing\n    ],\n    providers: [\n      appRoutingProviders,\n      CanvasService,\n      FileService\n    ],\n    bootstrap: [AppComponent]\n})\n\nexport class AppModule {}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/app.module.ts\n **/","import { Routes, RouterModule }   from '@angular/router';\n\nimport { UploadComponent } from './upload/upload.component';\nimport { RotateComponent } from './rotate/rotate.component';\nimport { DrawComponent } from './draw/draw.component';\nimport { TextComponent } from './text/text.component';\nimport { DownloadComponent } from './download/download.component';\n\nconst appRoutes: Routes = [\n  { path: 'upload', component: UploadComponent },\n  { path: 'rotate', component: RotateComponent },\n  { path:  'draw', component: DrawComponent },\n  { path: 'text', component: TextComponent },\n  { path:  'download', component: DownloadComponent },\n  {\n    path: '',\n    redirectTo: '/upload',\n    pathMatch: 'full'\n  },\n  {\n    path: '**',\n    redirectTo: '/upload'\n  }\n];\n\nexport const appRoutingProviders: any[] = [\n\n];\n\nexport const routing = RouterModule.forRoot(appRoutes);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/app.routing.ts\n **/","import { Component } from '@angular/core';\n\n//import PDFJS from 'pdfjs-dist'; //Typescript herkent deze module niet\nlet PDFJS = require('../../../node_modules/pdfjs-dist/build/pdf.combined.js');\n\nimport { CanvasService } from '../canvas-service/canvas.service'\nimport { FileService } from '../file-service/file.service';\n\n@Component({\n  template: `\n  <p>Upload een afbeelding (jpg, png) of pdf van je ID naar de browser.</p>\n  <p class=\"toelichting\">Het bestand dat je straks downloadt heeft  dezelfde afmetingen als het geuploade bestand.</p>\n  <div class=\"fileUpload\">\n  <label for=\"upload-button\" class=\"topcoat-button--large\">Bestand kiezen ...</label>\n  <input id=\"upload-button\" type=\"file\" accept='image/*,application/pdf' (change)=\"onChange($event)\">\n  </div>\n  `\n})\n\nexport class UploadComponent {\n\n  constructor(private fileService: FileService, private canvasService: CanvasService) {};\n\n  onChange(event: Event) {\n\n    let inputTarget: HTMLInputElement =  <HTMLInputElement>event.target || <HTMLInputElement>event.srcElement; //browser compatibility\n    let newFile = (inputTarget).files[0];\n\n    if (!newFile) {\n      return\n    }\n\n    this.canvasService.clearDrawing(true);\n    this.canvasService.showDrawingCanvas(false);\n    this.canvasService.showTextCanvas(false);\n    this.canvasService.rotated = 0;\n    this.canvasService.textValue = '';\n\n    if (newFile.type.match('image.*')) {\n      return this.loadImg(newFile)\n      .then(file => {\n        this.setDrawAndTextCanvasses();\n        return file;\n      });\n    }\n    else if (newFile.type.match('application/pdf') || newFile.type.match('application/force-download')) {\n      return this.loadPdf(newFile)\n      .then(file => {\n        this.setDrawAndTextCanvasses();\n        return file;\n      });\n    }\n    else {\n       alert('Je hebt geen afbeeldingsbestand of pdf gekozen. Kies opnieuw.')\n    }\n  }\n\n  loadImg(newFile) {\n\n    let reader = new FileReader();\n    let img = new Image();\n\n    reader.readAsDataURL(newFile);\n\n    return new Promise(function(resolve, reject) {\n      reader.onload = resolve;\n      reader.onerror = reject;\n    })\n      .then(event => {\n        img.onload = () => this.fileService.loadFile(img);\n        img.src = event[\"target\"].result;\n        return img;\n      })\n      .catch(error => console.log(error));\n  }\n\n  loadPdf(newFile) {\n\n    let reader = new FileReader();\n\n    reader.readAsArrayBuffer(newFile);\n\n    return new Promise(function(resolve, reject) {\n      reader.onload = resolve;\n      reader.onerror = reject;\n    })\n      .then(event => {\n        let res = event[\"target\"].result;\n        let typedarray = new Uint8Array(res);\n        return PDFJS.getDocument(typedarray); //PDFJS.getDocument is promise\n      })\n      .then(pdf => {return pdf.getPage(1);})\n      .then(page => {\n        this.fileService.loadFile(page);\n        return page;\n      })\n      .catch(error => console.log(error));\n  }\n\n  setDrawAndTextCanvasses() {\n\n    this.canvasService.showDrawingCanvas(true);\n    this.canvasService.showTextCanvas(true);\n  }\n}\n\n//test if (img instanceof HTMLImageElement)\n//test if (page.hasOwnProperty(\"pageIndex\"))\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/upload/upload.component.ts\n **/","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs/Subject';\n\n@Injectable()\nexport class CanvasService {\n\n  //These values will be passed between components\n  scale: number;\n  width: number;\n  height: number;\n  rotated = 0;\n  lineWidth = 10;\n  drawCv: HTMLCanvasElement = null;\n  textCv: HTMLCanvasElement = null;\n  textAreaDimensions: number[];\n  textValue: string = '';\n\n  // Observable string sources\n  rotateSource = new Subject<number>();\n  drawingCanvasShowSource = new Subject<boolean>();\n  clearDrawingSource = new Subject<boolean>();\n  textCanvasShowSource = new Subject<boolean>();\n  clearTextSource = new Subject<boolean>();\n  textSource = new Subject<string>();\n  clearSelectedAreaSource = new Subject<boolean>();\n  widthHeightSource = new Subject<number[]>();\n\n  //Observable string streams\n  rotate$ = this.rotateSource.asObservable();\n  drawingCanvasShow$ = this.drawingCanvasShowSource.asObservable();\n  clearDrawing$ = this.clearDrawingSource.asObservable();\n  textCanvasShow$ = this.textCanvasShowSource.asObservable();\n  clearText$ = this.clearTextSource.asObservable();\n  text$ = this.textSource.asObservable();\n  clearSelectedArea$ = this.clearSelectedAreaSource.asObservable();\n  widthHeight$ = this.widthHeightSource.asObservable();\n\n  // Service message commands\n  rotate(rotation: number) { \n      this.rotated = this.rotated + rotation;\n      this.rotateSource.next(this.rotated);\n    }\n\n  showDrawingCanvas(show: boolean) {\n    this.drawingCanvasShowSource.next(show);\n  }\n\n  clearDrawing(clear: boolean) {\n    this.clearDrawingSource.next(clear);\n  }\n\n  showTextCanvas(show: boolean) {\n    this.textCanvasShowSource.next(show);\n  }\n\n  clearText(clear: boolean) {\n    this.clearTextSource.next(clear);\n    this.textValue = '';\n  }\n\n  text(text: string) {\n    this.textSource.next(text);\n    this.textValue = text;\n  }\n\n  clearSelectedArea(clear: boolean) {\n    this.clearSelectedAreaSource.next(clear);\n  }\n  \n  changeWidthHeight(wh: number[]) {\n    this.widthHeightSource.next(wh);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/canvas-service/canvas.service.ts\n **/","import { Injectable } from '@angular/core';\nimport { Subject }    from 'rxjs/Subject';\nimport { BehaviorSubject }    from 'rxjs/BehaviorSubject';\n\n@Injectable()\nexport class FileService {\n\n  public file = new Subject<HTMLImageElement | PDFPageProxy>();\n  public useFile: HTMLImageElement | PDFPageProxy;\n  public fileLoaded = false;\n\n  changedFile$ = this.file.asObservable();\n\n  loadFile(file: HTMLImageElement | PDFPageProxy) {\n    \n    this.useFile = file;\n    this.fileLoaded = true;\n    this.file.next(file);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/file-service/file.service.ts\n **/","import { Component } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { CanvasService } from '../canvas-service/canvas.service'\nimport { FileService } from '../file-service/file.service';\n\n@Component({\n  template: `\n  <div *ngIf=\"show\">\n    <p>Eventueel kun je de afbeelding roteren.</p>\n    <p class=\"toelichting\">Het bestand dat je straks downloadt is niet geroteerd. Roteren is alleen om het bewerken in deze app te vergemakkelijken.</p>\n    <button class=\"topcoat-button--large\" (click)=\"rotateLeft()\">Roteer linksom</button>\n    <button class=\"topcoat-button--large\" (click)=\"rotateRight()\">Roteer rechtsom</button>\n  </div>\n  <p class=\"alert\" *ngIf=\"!show\">Je hebt nog geen afbeelding of pdf ge-upload.</p>\n  `\n})\n\nexport class RotateComponent {\n\n  show = this.fileService.fileLoaded;\n  subscription1: Subscription;\n\n  constructor(private fileService: FileService, private canvasService: CanvasService) { };\n\n  private rotateLeft() {\n    this.canvasService.rotate(-90);\n  }\n\n  private rotateRight() {\n    this.canvasService.rotate(90);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/rotate/rotate.component.ts\n **/","import { Component } from '@angular/core';\n\nimport { CanvasService } from '../canvas-service/canvas.service';\nimport { FileService } from '../file-service/file.service';\n\n@Component({\n  template: `\n  <div *ngIf=\"show\">\n    <p>Trek met de muis een streep door je burger-servicenummer. Je moet de twee getypte, paginabrede regels onderaan je ID hebben. (In oudere paspoorten staat het BSN ook nog in rechts in het midden.)</p>\n    <button class=\"topcoat-button\" (click)=\"clear()\">Wis lijnen </button>\n    <label for=\"lijndikte\">Pas lijndikte aan:</label>\n      <input id=\"lijndikte\" class=\"topcoat-range\" #input *ngIf=\"show\" type=\"range\" min=\"4\" max=\"25\" value=\"10\" (change)=\"setLineWidth(input.value)\">\n  </div>\n  <p class=\"alert\" *ngIf=\"!show\">Je hebt nog geen afbeelding of pdf ge-upload.</p>\n  `\n})\n\nexport class DrawComponent {\n\n  show = this.fileService.fileLoaded;\n\n  constructor(private canvasService: CanvasService, private fileService: FileService) { };\n\n  clear() {\n    this.canvasService.clearDrawing(true);\n  }\n\n  setLineWidth(value) {\n    this.canvasService.lineWidth = value;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/draw/draw.component.ts\n **/","import { Component } from '@angular/core';\n\nimport { CanvasService } from '../canvas-service/canvas.service';\nimport { FileService } from '../file-service/file.service';\n\n@Component({\n  template: `\n  <div *ngIf=\"show\">\n    <p>In het watermerk kun je aangeven voor wie de kopie van je ID bestemd is en waarvoor de kopie nodig is. De datum wordt automatisch toegevoegd.</p>\n    <p class=\"toelichting\">Bijvoorbeeld: 'Kopie voor verhuurbedrijf Jansen & Janssens, bestemd als identificatie bij de huur van een feesttent.'\n    <p>Om het gebied te verkleinen waar de tekst overheen komt: sleep met de muis.</p>\n      <textarea class=\"topcoat-textarea\" [attr.rows]=\"4\" [attr.cols]=\"28\" #input [value]=\"inputvalue\"  (keyup)=\"changeText(input.value)\" placeholder=\"Tik je watermerk-tekst ...\"></textarea>\n    <input class=\"topcoat-button\" type=\"reset\" (click)=\"clearText()\" value=\"Wis tekst\">\n    <button class=\"topcoat-button\" (click)=\"clearSelectedArea()\">Wis geselecteerde gebied</button>\n  </div>\n  <p class=\"alert\" *ngIf=\"!show\">Je hebt nog geen afbeelding of pdf ge-upload.</p>\n  `\n})\n\nexport class TextComponent {\n\n  show = this.fileService.fileLoaded;\n  inputvalue = this.canvasService.textValue;\n\n  constructor(private canvasService: CanvasService, private fileService: FileService) { };\n\n  clearText() {\n\n    this.canvasService.clearText(true);\n    this.inputvalue = '';\n  }\n\n  changeText(value) {\n    this.canvasService.text(value);\n  }\n\n  clearSelectedArea() {\n    this.canvasService.clearSelectedArea(true);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/text/text.component.ts\n **/","import { Component, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\nlet FS = require('../../../node_modules/filesaver.js/FileSaver.js');\nlet toBlob = require('../../../node_modules/canvas-to-blob');\n\nimport { CanvasService } from '../canvas-service/canvas.service';\nimport { FileService } from '../file-service/file.service';\n\n@Component({\n  template: `\n  <div *ngIf=\"file\">\n    <p>Download je bestand. En klaar!</p>\n    <button class=\"topcoat-button--large\" (click)=\"download()\" [disabled]=\"!file\">Download</button>\n  </div>\n  <p class=\"alert\" *ngIf=\"!file\">Je hebt nog geen afbeelding of pdf ge-upload.</p>\n  `\n})\n\nexport class DownloadComponent {\n\n  private fileSubscription: Subscription;\n  private file: HTMLImageElement | PDFPageProxy;\n  private offscreen = document.createElement('canvas');\n  private viewportScale = 1;\n\n  constructor(private fileService: FileService, private canvasService: CanvasService) {\n    this.file = this.fileService.useFile;\n  };\n\n  download() {\n\n    if (this.file) {\n\n      if (this.file.hasOwnProperty('pageIndex')) {\n        this.pdfOnCanvas();\n      }\n      if (this.file instanceof HTMLImageElement) {\n        this.bitmapOnCanvas();\n      }\n    }\n  }\n\n  pdfOnCanvas() {\n    \n    let pdf = <PDFPageProxy>this.file;\n    let canv = this.offscreen;\n    let ctx = canv.getContext('2d');\n    let draw = this.canvasService.drawCv;\n    let text = this.canvasService.textCv;\n    this.viewportScale = 4.166667;\n\n    let viewport = pdf.getViewport(this.viewportScale);\n    canv.width = viewport.width;\n    canv.height = viewport.height;\n\n    let renderContext = {\n      canvasContext: ctx,\n      viewport: viewport\n    };\n    pdf.render(renderContext)\n      .then(promise => {\n        if (draw) this.layerOnCanvas(draw, ctx);\n        if (text) this.layerOnCanvas(text, ctx);\n        let data = canv.toDataURL(\"image/jpeg\", 0.6);\n        let blob = toBlob(data);\n        FS.saveAs(blob, \"kopieID.jpg\");\n        return promise;\n      });\n  }\n\n  bitmapOnCanvas() {\n\n    let img = <HTMLImageElement>this.file;\n    let canv = this.offscreen;\n    let ctx = canv.getContext('2d');\n    let draw = this.canvasService.drawCv;\n    let text = this.canvasService.textCv;\n\n    canv.width = img.width;\n    canv.height = img.height;\n    ctx.drawImage(img, 0, 0);\n\n    if (draw) this.layerOnCanvas(draw, ctx);\n    if (text) this.layerOnCanvas(text, ctx);\n\n    let data = canv.toDataURL(\"image/jpeg\", 0.6);\n    let blob = toBlob(data);\n    FS.saveAs(blob, \"kopieID.jpg\");\n  }\n\n  layerOnCanvas(layer, ctx) {\n\n    let scale = this.viewportScale * (1 / this.canvasService.scale);\n    let ratioSwitched = this.canvasService.rotated % 180 !== 0;\n\n    ctx.save();\n    ctx.scale(scale, scale);\n    if (ratioSwitched === true) {\n      ctx.translate(layer.height / 2, layer.width / 2);\n      ctx.rotate(-this.canvasService.rotated * Math.PI / 180);\n      ctx.translate(-layer.width / 2, -layer.height / 2);\n    }\n    else {\n      ctx.translate(layer.width / 2, layer.height / 2);\n      ctx.rotate(-this.canvasService.rotated * Math.PI / 180);\n      ctx.translate(-layer.width / 2, -layer.height / 2);\n    }\n    ctx.drawImage(layer, 0, 0);\n    ctx.restore();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/download/download.component.ts\n **/","import { Component, OnInit } from '@angular/core';\nimport { Router }   from '@angular/router';\n\nimport { CanvasService } from './canvas-service/canvas.service';\n\n@Component({\n  selector: 'root',\n  template: `\n  <div id=\"app\">\n    <div class=\"nav-en-outlet\">\n        <a routerLink=\"/upload\" routerLinkActive=\"active\">Uploaden</a>\n        <a routerLink=\"/rotate\" routerLinkActive=\"active\">Roteren</a>\n        <a routerLink=\"/draw\" routerLinkActive=\"active\">Burgerservicenummer verbergen</a>\n        <a routerLink=\"/text\" routerLinkActive=\"active\">Watermerk toevoegen</a>\n        <a routerLink=\"/download\" routerLinkActive=\"active\">Downloaden</a>\n      <div class=\"router-outlet\" [ngStyle]=\"setOrder()\">\n        <router-outlet></router-outlet>\n      </div>\n    </div>\n    <div class=\"canvas-container\" [style.height]=\"height\">\n      <bitmap></bitmap>\n      <pdf></pdf>\n      <draw></draw> \n      <text></text>\n    </div>\n  </div>\n  `,\n  styles: ['.canvas-container { position: relative }; text { pointer-events: none }']\n})\n\nexport class AppComponent implements OnInit {\n\n  private order: string;\n  width;\n  height;\n\n  constructor(private canvasService: CanvasService, private router: Router) { };\n\n  ngOnInit() {\n    this.router.events.subscribe(event => {\n      this.setOrder(event.url);\n      this.canvasService.widthHeight$.subscribe(wh => {\n        this.width = wh[0] + 'px';\n        this.height = wh[1] + 'px';\n      })\n    })\n  }\n\n  setOrder(url) {\n\n    let order\n    switch (url) {\n      case '/upload':\n        order = 11;\n        break;\n      case '/rotate':\n        order = 21;\n        break;\n      case '/draw':\n        order = 31;\n        break;\n      case '/text':\n        order = 41;\n        break;\n      case '/download':\n        order = 51;\n        break;\n      default:\n        order = 11;\n    }\n\n    //event.url fires many times, sometimes it fires undefined; therefore this solution\n    if (url !== undefined) {\n      this.order = order;\n    }\n\n    return { 'order': this.order }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/app.component.ts\n **/","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { CanvasService } from '../canvas-service/canvas.service';\nimport { FileService } from '../file-service/file.service';\n\n@Component({\n  selector: 'bitmap',\n  template: `<canvas id=\"canvas-bitmap\" #canvasBitmap [attr.width]=\"canvasWidth\" [attr.height]=\"canvasHeight\">Je browser is niet geschikt deze webtool.</canvas>`,\n  styles: ['canvas { position: absolute }']\n})\n\nexport class BitmapOnCanvas implements OnInit {\n\n  private show = false;\n  @ViewChild('canvasBitmap') canvasView;\n  private canv: HTMLCanvasElement;\n  private file: HTMLImageElement | PDFPageProxy;\n  private canvasMaxWidth = 750;\n  private canvasMaxHeight = 900;\n  canvasWidth;\n  canvasHeight;\n\n  constructor(private fileService: FileService, private canvasService: CanvasService) { };\n\n  ngOnInit() {\n\n    this.fileService.changedFile$.subscribe(file => { console.log('file')\n\n      this.file = file;\n\n      if (file instanceof HTMLImageElement) {\n        //this.show = true;\n        let rotated = 0;\n        let canvasParams = this.computeCanvasParams(file, rotated);\n        this.setCanvasService(canvasParams.width, canvasParams.height, canvasParams.scale);\n        this.canv = <HTMLCanvasElement>this.canvasView.nativeElement;\n        this.putOnCanvas(<HTMLImageElement>file, canvasParams, this.canv);\n      }\n      else {\n        //this.show = false;        \n\n        //Safari hangs on 'undefined' of canvasView when clearing the canvas with ngIf, even if used in timeout, therefore this workaround\n        window.setTimeout(() => {\n          this.canvasWidth = 0;\n          this.canvasHeight = 0;\n        }, 10);\n\n      }\n    });\n\n    this.canvasService.rotate$.subscribe(rotate => {\n      if (this.file instanceof HTMLImageElement) {\n        let canvasParams = this.computeCanvasParams(this.file, rotate);\n        this.setCanvasService(canvasParams.width, canvasParams.height, canvasParams.scale);\n        this.putOnCanvas(<HTMLImageElement>this.file, canvasParams, this.canv);\n      }\n    });\n  }\n\n  computeCanvasParams(file, rotated) {\n\n    //if rotated 90 or -90, toggle width and height \n    let ratioSwitched = rotated % 180 !== 0;\n    let actualWidth = file.width;\n    let actualHeight = file.height;\n\n    if (ratioSwitched) {\n      actualWidth = file.height;\n      actualHeight = file.width;\n    }\n\n    //set scale for canvas context, to prevent image overflow\n    //notice that scale will always be <= 1\n    let scale = 1;\n\n    if (actualWidth > this.canvasMaxWidth) {\n      scale = this.canvasMaxWidth / actualWidth;\n    }\n    if (scale * actualHeight > this.canvasMaxHeight) {\n      scale = this.canvasMaxWidth / actualHeight;\n    }\n\n    //if image smaller than canvas max sizes, adjust canvas sizes\n    //NB if image smaller than canvas, then scale = 1\n    let canvasWidth = scale * actualWidth;\n    let canvasHeight = scale * actualHeight;\n\n    return {\n      width: canvasWidth,\n      height: canvasHeight,\n      scale: scale,\n      rotated: rotated\n    };\n  }\n\n  setCanvasService(width, height, scale) {\n    this.canvasService.scale = scale;\n    this.canvasService.height = height;\n    this.canvasService.width = width;\n    this.canvasService.changeWidthHeight([width, height]);\n  }\n\n  putOnCanvas(file: HTMLImageElement, canvasParams: { width: number, height: number, scale: number, rotated: number }, canvas: HTMLCanvasElement) {\n\n    let scale = canvasParams.scale;\n    let width = canvasParams.width;\n    let height = canvasParams.height;\n    let rotate = canvasParams.rotated;\n    let ratioSwitched = rotate % 180 !== 0;\n    let ctx = canvas.getContext('2d');\n\n    this.canvasWidth = width;\n    this.canvasHeight = height;\n\n    function drawImg() {\n      ctx.translate(width / 2, height / 2);\n      ctx.rotate(rotate * Math.PI / 180);\n      if (ratioSwitched) {\n        ctx.translate(-height / 2, -width / 2);\n      }\n      else {\n        ctx.translate(-width / 2, -height / 2);\n      }\n      ctx.scale(scale, scale);\n      ctx.drawImage(file, 0, 0);\n    }\n\n    window.setTimeout(() => {\n      this.canv.width = width; //superfluous in all browsers except Safari\n      this.canv.height = height; //superfluous in all browsers except Safari\n      drawImg();\n    }, 50); //50ms delay otherwise bitmap not visible in Safari\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/bitmapOnCanvas/bitmapOnCanvas.component.ts\n **/","import { Component, ViewChild, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { CanvasService } from '../canvas-service/canvas.service';\nimport { FileService } from '../file-service/file.service';\n\n@Component({\n  selector: 'pdf',\n  template: `\n  <canvas *ngIf=\"show\" #canvas>Je browser is niet geschikt deze webtool.</canvas>\n  `,\n  styles: ['canvas { position: absolute }']\n})\n\nexport class PdfOnCanvas implements OnInit {\n\n  private fileSubscription: Subscription;\n  private rotateSubscription: Subscription;\n  private show: boolean = false;\n  @ViewChild('canvas') canvas;\n  private canvasWidth = 750;\n  private canvasHeight: number;\n  private rotate = 0;\n  private file: HTMLImageElement | PDFPageProxy;\n\n  constructor(private canvasService: CanvasService, private fileService: FileService) { };\n\n  ngOnInit() {\n\n    this.fileSubscription = this.fileService.changedFile$.subscribe(file => {\n      if (file.hasOwnProperty('pageIndex')) {\n        this.show = true;\n        this.file = file;\n        window.setTimeout(() => this.putOnCanvas(<PDFPageProxy>file), 0);\n      }\n      else {\n        this.show = false;\n        this.file = file;\n      }\n    });\n\n    this.rotateSubscription = this.canvasService.rotate$.subscribe(rotate => {\n      if (this.file.hasOwnProperty('pageIndex')) {\n        this.putOnCanvas(<PDFPageProxy>this.file);\n      }\n    });    \n  }\n\n  putOnCanvas(file: PDFPageProxy) {\n\n    let pdfWidth: number = file.view[2];\n    let pdfHeight: number = file.view[3];\n\n    let ratioSwitched = this.canvasService.rotated % 180 !== 0;\n    let zoom = pdfWidth < this.canvasWidth ? 1 : this.canvasWidth / pdfWidth;\n    let zoomRatioSwitched = pdfHeight < this.canvasWidth ? 1 : this.canvasWidth / pdfHeight;\n    let scale = ratioSwitched ? zoomRatioSwitched : zoom;\n    this.canvasHeight = ratioSwitched ? zoomRatioSwitched * pdfWidth : zoom * pdfHeight;\n\n    this.canvasService.scale = scale;\n    this.canvasService.height = this.canvasHeight;\n    if (!ratioSwitched) {\n      this.canvasService.width = pdfWidth < this.canvasWidth ? pdfWidth : this.canvasWidth;\n    }\n    else {\n      this.canvasService.width = (pdfHeight < this.canvasWidth) ? pdfHeight : this.canvasWidth;\n    }\n\n    let canv: HTMLCanvasElement = this.canvas.nativeElement;\n    let ctx = canv.getContext('2d');\n\n    let viewport = file.getViewport(scale, this.canvasService.rotated);\n    canv.width = viewport.width;\n    canv.height = viewport.height;\n    canv.style.border = \"1px solid black\";\n\n    let renderContext = {\n      canvasContext: ctx,\n      viewport: viewport\n    };\n    file.render(renderContext);\n    this.canvasService.changeWidthHeight([viewport.width, viewport.height]);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/pdfOnCanvas/pdfOnCanvas.component.ts\n **/","import { Component, AfterViewInit, OnInit, ViewChild, HostListener } from '@angular/core';\nimport { Router }   from '@angular/router';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { CanvasService } from '../canvas-service/canvas.service'\n\n@Component({\n  selector: 'draw',\n  template: `\n  <div *ngIf=\"show\">\n  <canvas #view></canvas>\n  <canvas id=\"temp\" #temp (mousedown)=\"startLine($event)\" (mousemove)=\"drawLine($event)\" (mouseup)=\"endLine($event)\" [style.pointer-events]=\"currentUrl ==='/draw' ? 'auto' : 'none' \"></canvas>\n  </div>\n  `,\n  styles: ['canvas { position: absolute }']\n})\n\nexport class DrawingOnCanvas implements AfterViewInit, OnInit {\n\n  show = false;\n  private showSubscription: Subscription;\n  private clearSubscription: Subscription;\n  private rotateSubscription: Subscription;\n  private currentUrl: string; \n\n\n  @ViewChild('temp') temp;\n  temp_cv: HTMLCanvasElement;\n  temp_ctx: CanvasRenderingContext2D;\n  started = false;\n  x0: number;\n  y0: number;\n  x: number;\n  y: number;\n  mouseEventCache: MouseEvent;\n\n  @ViewChild('view') view;\n  view_cv: HTMLCanvasElement;\n  view_ctx: CanvasRenderingContext2D;\n\n  constructor( private canvasService: CanvasService, private router: Router) { };\n\n  ngOnInit() {\n\n    this.router.events.subscribe(event => {\n      if (event.toString().substring(0, 13) === 'NavigationEnd') {\n        this.currentUrl = event.url;\n      }\n    });\n  }\n\n  ngAfterViewInit() {\n\n    this.showSubscription = this.canvasService.drawingCanvasShow$.subscribe(\n      show => {\n        this.show = show;\n        if (show == true) {\n          window.setTimeout(() => this.setupCanvasses(), 250); //delay needed for Firefox, bitmapOnCanvas delays 50ms, setup this canvas thereafter\n        }\n      });\n\n    this.clearSubscription = this.canvasService.clearDrawing$.subscribe(\n      clear => {\n        this.clear();\n        this.clearCanvasServiceDrawCv();\n      });\n\n    this.rotateSubscription = this.canvasService.rotate$.subscribe(rotate => {\n      if (this.show == true) {\n        this.clear();\n        this.clearCanvasServiceDrawCv();\n        this.setupCanvasses();\n      }\n    })\n  }\n\n  setupCanvasses() {\n\n    this.temp_cv = this.temp.nativeElement;\n    this.temp_cv.width = this.canvasService.width;\n    this.temp_cv.height = this.canvasService.height;\n    this.temp_ctx = this.temp_cv.getContext('2d');\n\n    this.view_cv = this.view.nativeElement;\n    this.view_cv.width = this.canvasService.width;\n    this.view_cv.height = this.canvasService.height;\n    this.view_ctx = this.view_cv.getContext('2d');\n  };\n\n  private startLine(ev: MouseEvent) {\n    this.started = true;\n    this.x0 = ev.offsetX;\n    this.y0 = ev.offsetY;\n  };\n\n  private drawLine(ev: MouseEvent) {\n\n    if (!this.started) {\n      return;\n    }\n\n    this.temp_ctx.clearRect(0, 0, this.temp_cv.width, this.temp_cv.height);\n\n    this.temp_ctx.beginPath();\n    this.temp_ctx.moveTo(this.x0, this.y0);\n    this.temp_ctx.lineWidth = this.canvasService.lineWidth;\n    this.temp_ctx.lineCap = 'round';\n    this.temp_ctx.lineTo(ev.offsetX, ev.offsetY);\n    this.temp_ctx.stroke();\n    this.temp_ctx.closePath();\n\n    this.mouseEventCache = ev;\n  };\n\n  private endLine(ev: MouseEvent) {\n\n    if (this.started) {\n      //this.drawLine(ev);\n      this.started = false;\n      this.img_update();\n      this.updateCanvasServiceDrawCv();\n    }\n  };\n\n  @HostListener('document:mouseup', ['$event'])\n  onMouseup(event) {\n    this.endLine(this.mouseEventCache);\n  }\n\n  img_update() {\n\n    this.view_ctx.drawImage(this.temp_cv, 0, 0);\n    this.temp_ctx.clearRect(0, 0, this.temp_cv.width, this.temp_cv.height);\n    return this.temp_cv;\n  }\n\n  clear() {\n    \n    if (this.view_ctx) {\n      this.view_ctx.clearRect(0, 0, this.temp_cv.width, this.temp_cv.height);\n    }\n  }\n\n  updateCanvasServiceDrawCv() {\n    this.canvasService.drawCv = this.view_cv;\n  }\n\n  clearCanvasServiceDrawCv() {\n    this.canvasService.drawCv = null;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/drawingOnCanvas/drawingOnCanvas.component.ts\n **/","import { Component, AfterViewInit, OnInit, ViewChild, HostListener } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { CanvasService } from '../canvas-service/canvas.service'\n\n@Component({\n  selector: 'text',\n  template: `\n  <div *ngIf=\"show\">\n    <canvas #rect style=\"pointer-events:none\"></canvas>\n    <canvas #textcanvas style=\"pointer-events:none\"></canvas>\n    <canvas #temp (mousedown)=\"startSelection($event)\" (mousemove)=\"dragSelection($event)\" (mouseup)=\"endSelection($event)\" [style.pointer-events]=\"currentUrl ==='/text' ? 'all' : 'none' \"></canvas>\n  </div>\n  `,\n  styles: ['canvas { position: absolute }']\n})\n\nexport class TextOnCanvas implements AfterViewInit, OnInit {\n\n  private show = false;\n  private showSubscription: Subscription;\n  private clearSubscription: Subscription;\n  private rotateSubscription: Subscription;\n  private textSubscription: Subscription;\n  private clearSelectedAreaSubscription: Subscription;\n  private mouseEventCache: MouseEvent;\n  private currentUrl: string;\n\n  @ViewChild('temp') temp;\n  temprect_cv: HTMLCanvasElement;\n  temprect_ctx: CanvasRenderingContext2D;\n  started = false;\n  x0: number;\n  y0: number;\n  x: number;\n  y: number;\n\n  @ViewChild('rect') rect;\n  rect_cv: HTMLCanvasElement;\n  rect_ctx: CanvasRenderingContext2D;\n\n  @ViewChild('textcanvas') textcanvas;\n  text_cv: HTMLCanvasElement;\n  text_ctx: CanvasRenderingContext2D;\n\n  constructor(private canvasService: CanvasService, private router: Router) { };\n\n  ngOnInit() {\n\n    this.router.events.subscribe(event => {\n      if (event.toString().substring(0, 13) === 'NavigationEnd') {\n        this.currentUrl = event.url;\n      }\n    })\n  }\n\n  ngAfterViewInit() {\n\n    this.showSubscription = this.canvasService.textCanvasShow$.subscribe(\n      show => {\n        this.show = show;\n        if (show == true) {\n          window.setTimeout(() => this.setupCanvasses(), 250); //delay needed for Firefox, bitmapOnCanvas delays 50ms, setup this canvas thereafter\n        }\n      });\n\n    this.clearSubscription = this.canvasService.clearText$.subscribe(\n      clear => {\n        this.clearText();\n        //this.text = '';\n        this.clearCanvasServiceTextCv();\n      });\n\n    this.rotateSubscription = this.canvasService.rotate$.subscribe(rotate => {\n      if (this.show == true) {\n        this.clearText();\n        this.clearCanvasServiceTextCv();\n        this.clearSelectedArea();\n        this.setupCanvasses();\n      }\n    })\n\n    this.textSubscription = this.canvasService.text$.subscribe(text => {\n      this.clearText();\n      this.img_update(text);\n      //this.text = text;\n      this.updateCanvasServiceTextCv();\n    });\n\n    this.clearSelectedAreaSubscription = this.canvasService.clearSelectedArea$.subscribe(clear => {\n      this.clearSelectedArea();\n    })\n  }\n\n  setupCanvasses() {\n\n    let w = this.canvasService.width;\n    let h = this.canvasService.height;\n\n    this.temprect_cv = this.temp.nativeElement;\n    this.temprect_cv.width = w;\n    this.temprect_cv.height = h;\n    this.temprect_ctx = this.temprect_cv.getContext('2d');\n\n    this.rect_cv = this.rect.nativeElement;\n    this.rect_cv.width = w;\n    this.rect_cv.height = h;\n    this.rect_ctx = this.rect_cv.getContext('2d');\n\n    this.text_cv = this.textcanvas.nativeElement;\n    this.text_cv.width = w;\n    this.text_cv.height = h;\n    this.text_ctx = this.text_cv.getContext('2d');\n    this.text_ctx.textAlign = 'center';\n    this.text_ctx.textBaseline = 'middle';\n\n    //initial textarea dimensions = the whole canvas\n    this.canvasService.textAreaDimensions = this.computeTextDimensions(0, 0, w, h);\n    this.adjustTextAreaDimensions();\n  };\n\n  ///Set textarea dimensions\n\n  private startSelection(ev: MouseEvent) {\n    this.rect_ctx.clearRect(0, 0, this.rect_cv.width, this.rect_cv.height);\n\n    this.text_ctx.restore();\n\n    this.text_ctx.clearRect(0, 0, this.text_cv.width, this.text_cv.height);\n    this.started = true;\n    this.x0 = ev.offsetX;\n    this.y0 = ev.offsetY;\n  };\n\n  private dragSelection(ev: MouseEvent) {\n\n    if (!this.started) {\n      return;\n    }\n    this.temprect_ctx.clearRect(0, 0, this.temprect_cv.width, this.temprect_cv.height);\n    let width = ev.offsetX - this.x0;\n    let height = ev.offsetY - this.y0;\n    this.temprect_ctx.fillStyle = 'rgba(0,0,0,0.1)';\n    this.temprect_ctx.fillRect(this.x0, this.y0, width, height);\n    this.mouseEventCache = ev; //for HostListener\n  };\n\n  private endSelection(ev: MouseEvent) {\n\n    if (this.started) {\n      this.dragSelection(ev);\n      this.started = false;\n      this.canvasService.textAreaDimensions = this.computeTextDimensions(this.x0, this.y0, ev.offsetX, ev.offsetY);\n      this.adjustTextAreaDimensions();\n      this.rect_update();\n      this.img_update(this.canvasService.textValue);\n    }\n  };\n\n  //if mouseup event happens outside canvas, use last on canvas cached mouse event for endSelection\n  @HostListener('document:mouseup', ['$event'])\n  onMouseup(event) {\n    this.endSelection(this.mouseEventCache);\n  }\n\n  private computeTextDimensions(x1, y1, x2, y2) {\n\n    let x = Math.min(x1, x2);\n    let y = Math.min(y1, y2);\n    let w = Math.abs(x1 - x2);\n    let h = Math.abs(y1 - y2);\n    return [x, y, w, h];\n  }\n\n  private adjustTextAreaDimensions() {\n\n    let x = this.canvasService.textAreaDimensions[0];\n    let y = this.canvasService.textAreaDimensions[1];\n    let w = this.canvasService.textAreaDimensions[2];\n    let h = this.canvasService.textAreaDimensions[3];\n\n    this.text_ctx.save();\n\n    let angle = Math.atan(h / w);\n    this.text_ctx.translate(x + w / 2, y + h / 2);\n    this.text_ctx.rotate(-angle);\n  }\n\n  private rect_update() {\n\n    this.rect_ctx.drawImage(this.temprect_cv, 0, 0);\n\n    this.temprect_ctx.clearRect(0, 0, this.temprect_cv.width, this.temprect_cv.height);\n  }\n\n  //////Put text on canvas\n  img_update(text) {\n\n    let w = this.canvasService.textAreaDimensions[2];\n    let h = this.canvasService.textAreaDimensions[3];\n    let diagonal = Math.sqrt(w * w + h * h);\n\n    let fontSize = diagonal / 30;\n    this.text_ctx.font = fontSize + \"px sans-serif\";\n    this.text_ctx.save();\n    this.text_ctx.fillStyle = 'rgba(0,0,0,0.2)';\n\n    let datum = '';\n    if (this.canvasService.textValue !== '') {\n      datum = 'datum: ' + new Date().toLocaleDateString();\n    }\n\n    let maxCharsPerLine = 55; //determined manually\n\n    let breakString = ['.{1,', maxCharsPerLine, '}([\\\\.,\\\\s!\\\\?]|$)'].join('');\n    let breakStringRegExp = new RegExp(breakString, 'g');\n\n    if (text.length <= maxCharsPerLine) {\n      this.text_ctx.fillText(text, 0, 0);\n      this.text_ctx.fillText(datum, 0, 1.2 * fontSize);\n    }\n    else {\n      let text1 = text.match(breakStringRegExp)[0]//.trim();\n      let text2 = text.match(breakStringRegExp)[1]//.trim();\n      this.text_ctx.fillText(text1, 0, -1.2 * fontSize);\n      this.text_ctx.fillText(text2, 0, 0);\n      this.text_ctx.fillText(datum, 0, 1.2 * fontSize);\n    }\n\n    this.text_ctx.restore();//restore fillStyle for selecting text area\n  }\n\n  clearText() {\n\n    if (this.text_ctx) {\n      this.text_ctx.restore();\n      this.text_ctx.clearRect(0, 0, this.text_cv.width, this.text_cv.height);\n      this.adjustTextAreaDimensions();\n    }\n  }\n\n  clearSelectedArea() {\n\n    this.rect_ctx.clearRect(0, 0, this.rect_cv.width, this.rect_cv.height);\n\n    let w = this.text_cv.width;\n    let h = this.text_cv.height;\n\n    this.canvasService.textAreaDimensions = this.computeTextDimensions(0, 0, w, h);\n\n    this.clearText(); //after resetting textAreaDimensions, because clearText() uses the textAreaDimensions\n\n    this.img_update(this.canvasService.textValue);\n  }\n\n  updateCanvasServiceTextCv() {\n    this.canvasService.textCv = this.text_cv;\n  }\n\n  clearCanvasServiceTextCv() {\n    this.canvasService.textCv = null;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./src/app/textOnCanvas/textOnCanvas.component.ts\n **/"],"sourceRoot":""}