{"version":3,"sources":["winsten-zelfstandige-artsen.min.js"],"names":["viz","that","d3","formatDefaultLocale","decimal","thousands","grouping","currency","localeFormat","format","colors","linesContainer","select","append","attr","animationContainer","linesMargin","linesWidth","linesHeight","lines","style","animationMargin","animationWidth","animationHeight","animationSvgPaddingBottom","animation","checkboxes","insert","text","on","input","this","selectAll","classed","d","i","appendCheckboxes","data","checkboxLiElements","enter","updateLine","toLowerCase","numbers","enterLines","years","xLines","scaleBand","domain","range","linesXAxis","axisBottom","tickSizeInner","tickSizeOuter","yLines","call","scaleLinear","linesYAxis","axisLeft","tickSize","line","x","key","bandwidth","y","value","datum","entries","filter","entry","specialty","color","handle","sliderScale","startButton","selectMenu","updateAll","slider","sliderThrottler","sliderTimeout","setTimeout","undefined","yearIndex","Math","floor","sliderDomain","length","year","currentYear","actualSliderHandler","sliderWidth","rangeRound","parentNode","appendChild","cloneNode","drag","interrupt","event","selectMenuOptions","barLabels","maxLines","bars","xBars","enterBars","specialties","map","yBars","paddingInner","barsXAxis","barsYAxis","updateBars","duration","transition","updateSelectMenu","property","updateSliderHandler","getData","csv","error","keys","forEach","stop","lastYearIndex","yearToRunIndex","interval","timeout","animate"],"mappings":"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","file":"winsten-zelfstandige-artsen.min.js","sourcesContent":["function viz() {\n    ///////////////////////// Initial setup //////////////////////\n    var that = {}; // it's a design choice considering unit testing to create a that-object: it will be returned by viz() and has methods that can be used in unit tests\n    d3.formatDefaultLocale({\n        decimal: ',',\n        thousands: '.',\n        grouping: [3],\n        currency: ['€', '']\n    });\n    var localeFormat = d3.format(',.1f');\n    var colors = ['#C956CD', '#75D44B', '#CB472E', '#80B9CC', '#4E3C25', '#672F5C', '#71D39F', '#C48A3A', '#6F6FC7', '#557B3D', '#C897BE', '#C5BE9B', '#D1457F', '#CACC4F', '#AF5D58', '#435164'];\n    var linesContainer = d3.select('#viz')\n        .append('div')\n        .attr('id', 'lines-container');\n    var animationContainer = d3.select('#viz')\n        .append('div')\n        .attr('id', 'animation-container');\n    /* Svg for line diagram */\n    var linesMargin = {\n        top: 10,\n        right: 20,\n        bottom: 30,\n        left: 40\n    };\n    var linesWidth = 670 - linesMargin.left - linesMargin.right;\n    var linesHeight = 320 - linesMargin.top - linesMargin.bottom;\n    var lines = linesContainer.append('div')\n        .attr('id', 'lines-svg-container')\n        .style('padding-bottom', 100 * (linesHeight + linesMargin.top + linesMargin.bottom) / (linesWidth + linesMargin.left + linesMargin.right) + '%')\n        .append('svg')\n        .attr('viewBox', \"0 0 \" + (linesWidth + linesMargin.left + linesMargin.right) + \" \" + (linesHeight + linesMargin.top + linesMargin.bottom))\n        .append('g')\n        .attr('id', 'lines')\n        .attr('transform', \"translate(\" + linesMargin.left + \", \" + linesMargin.top + \")\");\n    /* Svg for animated bar chart */\n    var animationMargin = {\n        top: 0,\n        right: 20,\n        bottom: 87,\n        left: 120\n    };\n    var animationWidth = 670 - animationMargin.left - animationMargin.right;\n    var animationHeight = 367 - animationMargin.top - animationMargin.bottom;\n    var animationSvgPaddingBottom = 100 * (animationHeight + animationMargin.top + animationMargin.bottom) / (animationWidth + animationMargin.left + animationMargin.right) + '%';\n    var animation = animationContainer.append('div')\n        .attr('id', 'animation-svg-container')\n        .style('padding-bottom', animationSvgPaddingBottom)\n        .append('svg')\n        .attr('viewBox', \"0 0 \" + (animationWidth + animationMargin.left + animationMargin.right) + \" \" + (animationHeight + animationMargin.top + animationMargin.bottom))\n        .append('g')\n        .attr('id', 'animation')\n        .attr('transform', \"translate(\" + animationMargin.left + \", \" + animationMargin.top + \")\");\n    ///////////////////////// Lines diagram //////////////////////\n    /* Checkboxes */\n    var selectAllDiv = linesContainer.insert('div', '#lines-svg-container')\n        .attr('id', 'select-deselect-all')\n        .append('label')\n        .text('selecteer/deselecteer alles')\n        .append('input')\n        .attr('class', 'w3-check')\n        .attr('type', 'checkbox')\n        .on('click', function () {\n        var input = d3.select(this);\n        if (!input.attr('checked')) {\n            input.attr('checked', true);\n            d3.selectAll('#checkboxes-container input')\n                .attr('checked', true);\n            d3.selectAll('#line-pathes path')\n                .classed('colored', true)\n                .style('stroke', function (d, i) { return colors[i]; })\n                .style('stroke-width', 2);\n            d3.selectAll('#numbers-container .numbers')\n                .classed('visible', true);\n        }\n        else {\n            input.attr('checked', null);\n            d3.selectAll('#checkboxes-container input')\n                .attr('checked', null);\n            d3.selectAll('#line-pathes path')\n                .classed('colored', false)\n                .style('stroke', '#ddd')\n                .style('stroke-width', 1);\n            d3.selectAll('#numbers-container .numbers')\n                .classed('visible', false);\n        }\n    });\n    var checkboxes = linesContainer.insert('div', '#lines-svg-container')\n        .attr('id', 'checkboxes-container')\n        .append('ul');\n    that.appendCheckboxes = function (data) {\n        var checkboxLiElements = checkboxes.selectAll('li')\n            .data(data)\n            .enter()\n            .append('li')\n            .on('click', function (d) {\n            that.updateLine(d['Specialisme']);\n            var input = d3.select(this).select('input');\n            input.attr('checked') ? input.attr('checked', null) : input.attr('checked', true);\n        });\n        checkboxLiElements.append('input')\n            .attr('class', 'w3-check')\n            .attr('type', 'checkbox')\n            .attr('value', function (d) { return d['Specialisme']; })\n            .style('pointer-events', 'none'); // because we let the li-element handle events, if input also reacts the checked-logic will be disturbed\n        checkboxLiElements.append('div')\n            .attr('class', function (d) { return \"colorbox \" + d['Specialisme'].toLowerCase(); })\n            .style('background-color', function (d, i) { return colors[i]; });\n        checkboxLiElements.append('label')\n            .text(function (d) { return d['Specialisme']; });\n    };\n    var showHideNumbersDiv = linesContainer.insert('div', '#lines-svg-container')\n        .attr('id', 'show-hide-numbers')\n        .append('label')\n        .text('toon/verberg cijfers')\n        .append('input')\n        .attr('class', 'w3-check')\n        .attr('type', 'checkbox')\n        .on('click', function () {\n        var numbers = d3.select('#numbers-container');\n        numbers.classed('hidden') ? numbers.classed('hidden', false) : numbers.classed('hidden', true);\n    });\n    /* Lines chart */\n    that.enterLines = function (data, years) {\n        var xLines = d3.scaleBand()\n            .domain(years)\n            .range([0, linesWidth]);\n        var linesXAxis = d3.axisBottom(xLines).tickSizeInner(6).tickSizeOuter(0);\n        var linesXAxisContainer = lines.append('g')\n            .attr('class', 'x-axis')\n            .attr('transform', \"translate(0, \" + linesHeight + \")\")\n            .call(linesXAxis);\n        var yLines = d3.scaleLinear()\n            .domain([0, 450]) // 450 is max value of data, rounded up to ..50\n            .range([linesHeight, 0]);\n        var linesYAxis = d3.axisLeft(yLines).tickSize(6);\n        var linesYAxisContainer = lines.append('g')\n            .attr('class', 'y-axis')\n            .call(linesYAxis);\n        var line = d3.line()\n            .x(function (d) { return xLines(d.key) + xLines.bandwidth() / 2; })\n            .y(function (d) { return yLines(d.value); });\n        var linePathes = lines.append('g')\n            .attr('id', 'line-pathes')\n            .selectAll('.line')\n            .data(data)\n            .enter()\n            .append('path')\n            .attr('id', function (d) { return \"line-\" + d['Specialisme'].toLowerCase(); })\n            .attr('class', 'line')\n            .datum(function (d) { return d3.entries(d).filter(function (entry) { return entry.key !== 'Specialisme'; }); })\n            .style('stroke', '#ddd')\n            .style('fill', 'none')\n            .attr('d', function (d) { return line(d); });\n        var numbers = lines.append('g')\n            .attr('id', 'numbers-container')\n            .selectAll('.numbers')\n            .data(data)\n            .enter()\n            .append('g')\n            .attr('class', function (d) { return \"numbers \" + d['Specialisme'].toLowerCase(); })\n            .selectAll('text')\n            .data(function (d) { return d3.entries(d).filter(function (entry) { return entry.key !== 'Specialisme'; }); })\n            .enter()\n            .append('text')\n            .attr('x', function (d) { return xLines(d.key) + xLines.bandwidth() / 2; })\n            .attr('y', function (d) { return yLines(+d.value); })\n            .attr('dy', -5)\n            .style('text-anchor', 'middle')\n            .text(function (d) { return localeFormat(+d.value); });\n    };\n    that.updateLine = function (specialty) {\n        var color = d3.select(\".colorbox.\" + specialty.toLowerCase()).style('background-color');\n        var line = d3.select(\"#line-\" + specialty.toLowerCase());\n        var numbers = d3.select(\"#numbers-container .\" + specialty.toLowerCase());\n        if (!line.classed('colored')) {\n            line.classed('colored', true)\n                .style('stroke', color)\n                .style('stroke-width', 2);\n            numbers.classed('visible', true);\n        }\n        else {\n            line.classed('colored', false)\n                .style('stroke', '#ddd')\n                .style('stroke-width', 1);\n            numbers.classed('visible', false);\n        }\n    };\n    ///////////////////////// Animation //////////////////////\n    var startButton = animationContainer.insert('div', '#animation-svg-container')\n        .attr('id', 'start-button')\n        .append('button')\n        .attr('class', 'w3-button w3-dark-gray')\n        .text('Start animatie');\n    var selectMenu = animationContainer.append('div')\n        .attr('id', 'animation-select-menu')\n        .append('select')\n        .attr('class', 'w3-select')\n        .on('change', function () { updateAll(this.value); });\n    /* Slider conform Drag Slider on https://bl.ocks.org/mbostock/6452972 */\n    var handle;\n    var sliderScale;\n    that.slider = function (years) {\n        var sliderBottomPadding = 37;\n        var sliderWidth = animationWidth; // extra width, added to animationWidth\n        var sliderXTranslate = -60;\n        var sliderDomain = years;\n        sliderScale = d3.scaleBand()\n            .domain(sliderDomain)\n            .rangeRound([0, sliderWidth]);\n        var slider = animation.append('g')\n            .attr('id', 'slider')\n            .attr('transform', \"translate(\" + sliderXTranslate + \",\" + (animationHeight + animationMargin.bottom - sliderBottomPadding) + \")\");\n        slider.append('line')\n            .attr('class', 'track')\n            .attr('x1', sliderScale.range()[0])\n            .attr('x2', sliderScale.range()[1])\n            .select(function () { return this.parentNode.appendChild(this.cloneNode(true)); })\n            .attr('class', 'track-inset')\n            .select(function () { return this.parentNode.appendChild(this.cloneNode(true)); })\n            .attr('class', 'track-overlay')\n            .call(d3.drag()\n            .on('start.interrupt', function () { return slider.interrupt(); })\n            .on('start drag', function () { sliderThrottler(d3.event.x); }));\n        slider.insert('g', '.track-overlay')\n            .attr('class', 'ticks')\n            .attr('transform', 'translate(0,' + 33 + ')')\n            .selectAll('text')\n            .data(sliderScale.domain())\n            .enter().append('text')\n            .attr('x', function (d) { return sliderScale(d) + sliderScale.bandwidth() / 2; })\n            .attr('text-anchor', 'middle')\n            .text(function (d) { return d; });\n        handle = slider.insert('circle', '.track-overlay')\n            .attr('class', 'handle')\n            .attr('r', 15)\n            .attr('cx', sliderScale('2009') + sliderScale.bandwidth() / 2);\n        var sliderTimeout;\n        var currentYear = '2009'; // the initial slider value\n        function sliderThrottler(x) {\n            // ignore slider events as long as an actualResizeHandler execution is in the queue\n            if (!sliderTimeout) {\n                sliderTimeout = setTimeout(function () {\n                    sliderTimeout = undefined;\n                    actualSliderHandler(x);\n                    // the actualResizeHandler will execute at a rate of 16fps\n                }, 66);\n            }\n        }\n        function actualSliderHandler(x) {\n            var yearIndex = Math.floor(x / sliderScale.bandwidth());\n            if (yearIndex < 0) {\n                yearIndex = 0;\n                handle.attr('cx', sliderScale.range()[0]);\n            }\n            else if (yearIndex > sliderDomain.length - 1) {\n                yearIndex = sliderDomain.length - 1;\n                handle.attr('cx', sliderScale.range()[1]);\n            }\n            else {\n                handle.attr('cx', x);\n            }\n            var year = sliderDomain[yearIndex];\n            if (year !== currentYear) {\n                currentYear = year;\n                updateAll(year);\n            }\n        }\n    }; // end of that.slider()\n    /* Set the options in select-menu */\n    that.selectMenuOptions = function (years) {\n        selectMenu.selectAll('option')\n            .data(years)\n            .enter()\n            .append('option')\n            .attr('value', function (d) { return d; })\n            .text(function (d) { return d; });\n    };\n    /* Enter-bars and axes */\n    // These variables are outside enterBars() because we need them 'globally' or because of the 'z-index' in the svg\n    var maxLines = animation.append('g')\n        .attr('id', 'animation-dotted-lines'); // We need to define maxLines before bars, for z-index\n    var bars = animation.append('g')\n        .attr('id', 'bars');\n    var xBars = d3.scaleLinear()\n        .domain([0, 450]) // 450 is max value of data, rounded up to ..50\n        .range([0, animationWidth]);\n    var barLabels;\n    that.enterBars = function (data) {\n        var specialties = data.map(function (specialty) { return specialty['Specialisme']; });\n        var yBars = d3.scaleBand()\n            .domain(specialties)\n            .rangeRound([0, animationHeight])\n            .paddingInner(0.3);\n        var barsXAxis = d3.axisBottom(xBars).tickSize(6);\n        var barsXAxisContainer = animation.append('g')\n            .attr('class', 'x-axis')\n            .attr('transform', \"translate(0, \" + animationHeight + \")\")\n            .call(barsXAxis);\n        barsXAxisContainer.append('text')\n            .attr('x', animationWidth)\n            .attr('y', -4)\n            .style('text-anchor', 'end')\n            .text('winst x €1000');\n        var barsYAxis = d3.axisLeft(yBars).tickSizeInner(6).tickSizeOuter(0);\n        var barsYAxisContainer = animation.append('g')\n            .attr('class', 'y-axis')\n            .call(barsYAxis);\n        maxLines.selectAll('line')\n            .data(data)\n            .enter()\n            .append('line')\n            .attr('x1', 0)\n            .attr('y1', function (d) { return yBars(d['Specialisme']) + (yBars.bandwidth() / 2); })\n            .attr('x2', function (d) { return xBars(+d['2009']); })\n            .attr('y2', function (d) { return yBars(d['Specialisme']) + (yBars.bandwidth() / 2); });\n        bars.selectAll('rect')\n            .data(data)\n            .enter().append('rect')\n            .attr('x', 0)\n            .attr('y', function (d) { return yBars(d['Specialisme']); })\n            .attr('height', yBars.bandwidth())\n            .attr('width', function (d) { return xBars(+d['2009']); });\n        barLabels = bars.append('g')\n            .attr('id', 'bar-labels')\n            .selectAll('text')\n            .data(data)\n            .enter()\n            .append('text')\n            .attr('y', function (d) { return yBars(d['Specialisme']) + 9; })\n            .attr('x', function (d) { return xBars(+d['2009']); })\n            .attr('dx', -6)\n            .text(function (d) { return localeFormat(+d['2009']); });\n        var maxCircles = animation.append('g')\n            .attr('id', 'maximum-circles')\n            .selectAll('circle')\n            .data(data)\n            .enter()\n            .append('circle')\n            .attr('r', 5)\n            .attr('cx', function (d) { return xBars(+d['2009']); })\n            .attr('cy', function (d) { return yBars(d['Specialisme']) + (yBars.bandwidth() / 2); });\n    };\n    /* Update bars, slider and select-menu */\n    that.updateBars = function (year, duration) {\n        if (duration === void 0) { duration = 0; }\n        bars.selectAll('rect')\n            .transition()\n            .duration(duration)\n            .attr('width', function (d) { return xBars(+d[year]); });\n        barLabels\n            .transition()\n            .duration(duration)\n            .attr('x', function (d) { return xBars(+d[year]); }) // no selectAll('text') because barLabels already is a d3-selection of text elements \n            .text(function (d) { return localeFormat(+d[year]); });\n    };\n    var updateSliderHandler = function (year) {\n        handle.attr('cx', sliderScale(year) + sliderScale.bandwidth() / 2);\n    };\n    var updateSelectMenu = function (year) {\n        selectMenu.property('value', year);\n    };\n    var updateAll = function (year) {\n        that.updateBars(year, 500);\n        updateSelectMenu(year);\n        updateSliderHandler(year);\n    };\n    /* Animate */\n    var i;\n    var animate = function (years) {\n        var lastYearIndex = years.length - 1;\n        var yearToRunIndex = 0;\n        updateAll(years[yearToRunIndex]);\n        yearToRunIndex++;\n        i = d3.interval(function () {\n            updateAll(years[yearToRunIndex]);\n            yearToRunIndex++;\n            if (yearToRunIndex > lastYearIndex) {\n                i.stop();\n                d3.timeout(function () {\n                    startButton.text('Start animatie');\n                    startButton.classed('running', false);\n                }, 1200);\n            }\n        }, 1000);\n    };\n    var stopAnimate = function () {\n        i.stop();\n    };\n    ///////////////////////// Get and process data //////////////////////\n    that.getData = function () {\n        d3.csv('winsten-zelfstandige-artsen.csv', function (error, csv) {\n            var years = d3.keys(csv[0]).filter(function (key) { return key !== 'Specialisme'; });\n            //line svg\n            that.appendCheckboxes(csv);\n            var startSpecialties = ['Huisarts', 'Radioloog'];\n            d3.selectAll('#checkboxes-container input')\n                .filter('input[value=\"Huisarts\"], input[value=\"Radioloog\"]')\n                .attr('checked', true);\n            d3.select('#show-hide-numbers input').attr('checked', true);\n            that.enterLines(csv, years);\n            startSpecialties.forEach(function (specialty) { return that.updateLine(specialty); });\n            // animation svg\n            that.slider(years);\n            that.selectMenuOptions(years);\n            updateSelectMenu('2009');\n            that.enterBars(csv);\n            startButton.on('click', function () {\n                if (!startButton.classed('running')) {\n                    startButton.classed('running', true);\n                    startButton.text('Stop animatie');\n                    animate(years);\n                }\n                else {\n                    startButton.classed('running', false);\n                    startButton.text('Start animatie');\n                    stopAnimate();\n                }\n            });\n        });\n    };\n    return that;\n}\nviz().getData();\n"]}