{"version":3,"sources":["src/uiterwaarden/uiterwaarden.ts"],"names":["draw","riverbed","pathRiverbedSmall","pathRiverbedWide","topoObject1","topoObject2","topoObject3","topoObject4","topoObject5","topoObject6","topoObject7","topoObject8","topoObject9","viz","d3","select","buttonsContainer","append","attr","svgContainer","margin","durationStyleChange","durationShapeChange","projection","geoMercator","center","scale","path","geoPath","svg","queue","defer","json","await","error","json1","json2","json3","console","topojson","feature","objects","hoogwater","plaatsnamen","NL","schaal","pathBuilings","features","filter","fObj","properties","OMSCHRIJVI","pathForest","pathMeadow","pathWater","pathRiver","pathHighWater","pathRailway","pathHighway","pathRegionalRoad","pathConnectingRoad","placeNamesFeatures","type","pathRiversNL","path_NL","pathLegend","style","selectAll","data","enter","d","centroid","text","name","toUpperCase","legendBB","node","getBBox","x","y","width","height","legend","legendScale","scaleLinear","domain","range","legend_axis","axisTop","ticks","tickSize","call","riverNames","start","waterButtonsContainer","on","this","classed","transition","ease","easeLinear","duration","html","mapG","waterbuttons","translateX","translateY","zoomButton"],"mappings":"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","file":"uiterwaarden.min.js","sourcesContent":["interface IStringTMap<T> { [key: string]: T }\ninterface IStringStringMap extends IStringTMap<string> { }\n//import * as topojson from 'topojson'\ndeclare const topojson: any;\n\nfunction draw() {\n\n  /* Set up the svg */\n  const viz = d3.select('#viz');\n  const buttonsContainer = viz.append('div')\n    .attr('id', 'buttons-container');\n  const svgContainer = viz.append('div')\n    .attr('id', 'svg-container');\n\n  const width = 599;\n  const height = 350;\n  const center: [number, number] = [5.6995, 51.90825]; // const center = [8.4, 51.6];\n  const scale = 90000; //const scale = 3500;\n  const margin = {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n  const durationStyleChange = 2000;\n  const durationShapeChange = 2500;\n  let riverbed: any;\n  let pathRiverbedSmall: any;\n  let pathRiverbedWide: any;\n\n  const projection = d3.geoMercator()\n    .center(center)\n    .scale(scale);\n  const path = d3.geoPath().projection(projection);\n\n  const svg = svgContainer.append('svg')\n    .attr('viewBox', `0 0 ${width} ${height}`)\n    .append('g')\n    .attr('transform', `translate(${margin.left}, ${margin.top})`)\n    .append('g').attr('id', 'map');\n\n  /* Get the data and draw the map when the data is loaded */\n  let topoObject1: any, topoObject2: any, topoObject3: any, topoObject4: any, topoObject5: any, topoObject6: any, topoObject7: any, topoObject8: any, topoObject9: any;\n\n  d3.queue()\n    .defer(d3.json, 'data/geulen-smal.geojson')\n    .defer(d3.json, 'data/geulen-breed.geojson')\n    .defer(d3.json, 'data/uiterwaarden.json')\n    .await(function(error, json1, json2, json3) {\n      if (error) {\n        console.error('Error in loading data: ' + error);\n      }\n      else {\n        topoObject1 = json1;\n        topoObject2 = json2;\n        topoObject3 = topojson.feature(json3, json3.objects['buitendijks-en-water']);\n        topoObject4 = topojson.feature(json3, json3.objects.hoogwater);\n        topoObject5 = topojson.feature(json3, json3.objects['wegen-spoor']);\n        topoObject6 = topojson.feature(json3, json3.objects.plaatsnamen);\n        topoObject7 = topojson.feature(json3, json3.objects['rivieren-WatercrsL']);\n        topoObject8 = topojson.feature(json3, json3.objects.NL);\n        topoObject9 = topojson.feature(json3, json3.objects.schaal);\n        start();\n      }\n    });\n\n  function start() {\n\n    pathRiverbedSmall = path(topoObject1);\n    pathRiverbedWide = path(topoObject2);\n\n    const pathBuilings = path(topoObject3.features.filter(function(fObj: any) {\n      return fObj.properties.OMSCHRIJVI === 'huis';\n    })[0]);\n    const pathForest = path(topoObject3.features.filter(function(fObj: any) {\n      return fObj.properties.OMSCHRIJVI === 'bos';\n    })[0]);\n    const pathMeadow = path(topoObject3.features.filter(function(fObj: any) {\n      return fObj.properties.OMSCHRIJVI === 'wei';\n    })[0]);\n    const pathWater = path(topoObject3.features.filter(function(fObj: any) {\n      return fObj.properties.OMSCHRIJVI === 'water';\n    })[0]);\n    const pathRiver = path(topoObject3.features.filter(function(fObj: any) {\n      return fObj.properties.OMSCHRIJVI === 'rivier';\n    })[0]);\n\n    const pathHighWater = path(topoObject4);\n\n    const pathRailway = path(topoObject5.features.filter(function(fObj: any) {\n      return fObj.properties.OMSCHRIJVI === 'spoor';\n    })[0]);\n    const pathHighway = path(topoObject5.features.filter(function(fObj: any) {\n      return fObj.properties.OMSCHRIJVI === 'snelweg';\n    })[0]);\n    const pathRegionalRoad = path(topoObject5.features.filter(function(fObj: any) {\n      return fObj.properties.OMSCHRIJVI === 'regioweg';\n    })[0]);\n    const pathConnectingRoad = path(topoObject5.features.filter(function(fObj: any) {\n      return fObj.properties.OMSCHRIJVI === 'doorgaande-weg';\n    })[0]);\n\n    const placeNamesFeatures = topoObject6.features.filter(function(fObj: any) {\n      return fObj.properties.type === 'show';\n    });\n\n    const pathRiversNL = path(topoObject7);\n\n    const path_NL = path(topoObject8);\n\n    const pathLegend = path(topoObject9);\n\n    svg.append('path')\n      .attr('d', path_NL)\n      .style('fill', '#FFFFB7')\n      .style('stroke', '#ccc')\n      .style('stroke-width', 10);\n\n    svg.append('path')\n      .attr('d', pathRiversNL)\n      .style('fill', 'none')\n      .style('stroke', '#7CB5DA')\n      .style('stroke-width', 9);\n    svg.append('path')\n      .attr('d', pathHighWater)\n      .style('fill', 'rgb(223,240,193)') //zelfde kleur als wei\n      .style('stroke', 'rgb(223,240,193)')\n      .style('stroke-width', 1);\n\n    riverbed = svg.append('path')\n      .attr('d', pathRiverbedSmall)\n      .style('fill', 'rgb(124,181,218)')\n      .style('fill-opacity', 0.5)\n      .style('stroke', '#000')\n      .style('stroke-width', 0);\n\n    svg.append('path')\n      .attr('d', pathMeadow)\n      .style('fill', 'rgb(223,240,193)')\n      .style('stroke', 'none')\n      .style('stroke-width', 0);\n\n    svg.append('path')\n      .attr('d', pathWater)\n      .style('fill', 'rgb(124,181,218)')\n      .style('stroke', '#000')\n      .style('stroke-width', 0);\n\n    svg.append('path')\n      .attr('d', pathBuilings)\n      .style('fill', 'rgb(189,120,93)')\n      .style('stroke', '#000')\n      .style('stroke-width', 0);\n\n    svg.append('path')\n      .attr('d', pathForest)\n      .style('fill', 'rgb(101,184,68)')\n      .style('stroke', '#000')\n      .style('stroke-width', 0);\n\n    svg.append('path')\n      .attr('d', pathRiver)\n      .style('fill', 'rgb(124,181,218)')\n      .style('stroke', '#000')\n      .style('stroke-width', 0);\n\n    svg.append('path')\n      .attr('d', pathRailway)\n      .style('fill', 'none')\n      .style('stroke', '#000')\n      .style('stroke-width', 2);\n\n    svg.append('path')\n      .attr('d', pathRailway)\n      .style('fill', 'none')\n      .style('stroke', '#fff')\n      .style('stroke-width', 1.3)\n      .style('stroke-dasharray', '7, 5');\n\n    svg.append('path')\n      .attr('d', pathHighway)\n      .style('fill', 'none')\n      .style('stroke', 'rgb(168,168,168)')\n      .style('stroke-width', 2.5);\n\n    svg.append('path')\n      .attr('d', pathRegionalRoad)\n      .style('fill', 'none')\n      .style('stroke', 'rgb(168,168,168)')\n      .style('stroke-width', 1.5);\n\n    svg.append('path')\n      .attr('d', pathConnectingRoad)\n      .style('fill', 'none')\n      .style('stroke', 'rgb(168,168,168)')\n      .style('stroke-width', 0.5);\n\n    svg.selectAll('.placenames-layer0') // two layers text on top of each other; characters in layer0 are by css made wider and white, to get text with white stroke\n      .data(placeNamesFeatures)\n      .enter().append('text')\n      .attr('class', 'placenames-layer0')\n      .attr('x', function(d: any) {\n        return path.centroid(d)[0];\n      })\n      .attr('y', function(d: any) {\n        return path.centroid(d)[1];\n      })\n      .text(function(d: any) {\n        return d.properties.name.toUpperCase();\n      });\n\n    svg.selectAll('.placenames-layer1') // characters in layer1 are made black by css\n      .data(placeNamesFeatures)\n      .enter().append('text')\n      .attr('class', 'placenames-layer1')\n      .attr('x', function(d: any) {\n        return path.centroid(d)[0];\n      })\n      .attr('y', function(d: any) {\n        return path.centroid(d)[1];\n      })\n      .text(function(d: any) {\n        return d.properties.name.toUpperCase();\n      });\n\n    const legendBB = (<any>svg.append('path'))\n      .attr('d', pathLegend)\n      .node().getBBox();\n\n    svg.append('rect')\n      .attr('x', legendBB.x - 30)\n      .attr('y', legendBB.y - 11)\n      .attr('width', legendBB.width + 37)\n      .attr('height', legendBB.height + 16)\n      .style('fill', 'rgba(256,256,256,0.8)')\n      .style('stroke', 'none');\n\n    var legend = svg.append('g')\n      .attr('id', 'legend-g')\n      .attr('transform', 'translate(' + 0 + ',' + legendBB.y + ')');\n\n    var legendScale = d3.scaleLinear()\n      .domain([0, 2])\n      .range([legendBB.x, legendBB.x + legendBB.width]);\n\n    var legend_axis = d3.axisTop(legendScale)\n      .ticks(0)\n      .tickSize(4);\n\n    legend.call(legend_axis);\n\n    legend.append('text')\n      .attr('x', legendBB.x - 16)\n      .attr('y', 1)\n      .text('2 km');\n\n    var riverNames = svg.append('g')\n      .attr('class', 'rivernames');\n\n    riverNames.append('text')\n      .attr('x', 469)\n      .attr('y', 128)\n      .attr('transform', 'rotate(-11 469 128)')\n      .text('Nederrijn');\n\n    riverNames.append('text')\n      .attr('x', 483)\n      .attr('y', 301)\n      .attr('transform', 'rotate(22 483 301)')\n      .text('Waal');\n  }\n\n  /* High and low water buttons and high and low water functions */\n  const waterButtonsContainer = buttonsContainer.append('div')\n    .attr('id', 'water-buttons-container');\n\n  waterButtonsContainer.append('button')\n    .attr('id', 'high-water-button')\n    .attr('class', 'w3-button w3-small')\n    .on('click', function() {\n      if (!d3.select(this).classed('disabled') && !d3.select(this).classed('zooming')) {\n        highWater();\n      }\n    })\n    .html('laat het<br>water stijgen');\n\n  waterButtonsContainer.append('button')\n    .attr('id', 'low-water-button')\n    .attr('class', 'w3-button w3-small')\n    .on('click', function() {\n      if (!d3.select(this).classed('disabled') && !d3.select(this).classed('zooming')) {\n        lowWater();\n      }\n    })\n    .classed('disabled', true)\n    .html('laat het<br>water zakken');\n\n  function highWater() {\n\n    d3.selectAll('#high-water-button,#zoom-button').classed('disabled', true);\n\n    riverbed\n      .transition()\n      .ease(d3.easeLinear)\n      .duration(durationShapeChange)\n      .attr('d', pathRiverbedWide)\n      .transition()\n      .duration(durationStyleChange)\n      .ease(d3.easeLinear)\n      .style('fill-opacity', 1)\n      .on('end', function() {\n        d3.selectAll('#low-water-button,#zoom-button').classed('disabled', false);\n      });\n\n    d3.selectAll('.rivernames text')\n      .transition()\n      .duration(durationShapeChange)\n      .transition()\n      .duration(durationStyleChange)\n      .style('fill', 'rgb(82,144,228)');\n\n    d3.selectAll('.rivernames')\n      .transition()\n      .duration(durationShapeChange)\n      .transition()\n      .duration(durationStyleChange)\n      .attr('transform', 'translate(0,-5)');\n  }\n\n  function lowWater() {\n\n    d3.selectAll('#low-water-button,#zoom-button').classed('disabled', true);\n\n    riverbed\n      .transition()\n      .ease(d3.easeLinear)\n      .duration(durationStyleChange)\n      .style('fill-opacity', 0.5)\n      .transition()\n      .ease(d3.easeLinear)\n      .duration(durationShapeChange)\n      .attr('d', pathRiverbedSmall)\n      .on('end', function() {\n        d3.selectAll('#high-water-button,#zoom').classed('disabled', false);\n      });\n\n    d3.selectAll('.rivernames text')\n      .transition()\n      .duration(durationStyleChange)\n      .style('fill', 'rgb(124,181,218)');\n\n    d3.selectAll('.rivernames')\n      .transition()\n      .duration(durationStyleChange)\n      .attr('transform', 'translate(0,0)');\n  }\n\n  /* zooming */\n  const mapG: any = d3.select('#map');\n  const waterbuttons = d3.selectAll('#high-water-button,#low-water-button');\n\n  const zoomButtonContainer = buttonsContainer.append('div')\n    .attr('id', 'zoom-button-container');\n\n  zoomButtonContainer.append('button')\n    .attr('id', 'zoom-button')\n    .attr('class', 'w3-button w3-small w3-yellow')\n    .on('click', zoomed)\n    .classed('zoom-in', true)\n    .html('waar ligt<br>dit gebied?');\n\n  function zoomed() {\n    let scale: number;\n    let translateX: number;\n    let translateY: number;\n    const zoomButton = d3.select(this);\n    if (zoomButton.classed('zoom-in')) {\n      scale = 0.045;\n      translateX = 290;\n      translateY = 200;\n      zoomButton\n        .classed('zoom-in', false)\n        .classed('zoom-out', true)\n        .html('zoom in<br>op gebied');\n\n    } else if (zoomButton.classed('zoom-out')) {\n      scale = 1;\n      translateX = 0;\n      translateY = 0;\n      zoomButton\n        .classed('zoom-out', false)\n        .classed('zoom-in', true)\n        .html('waar ligt<br>dit gebied?');\n    }\n    mapG.transition()\n      .duration(durationStyleChange)\n      .attr('transform', `translate(${translateX}, ${translateY}) scale(${scale})`)\n      .call(function() {\n        if (scale !== 1) {\n          waterbuttons.classed('zooming', true);\n        }\n      })\n      .on('end', function() {\n        if (scale === 1) {\n          waterbuttons.classed('zooming', false);\n        }\n      });\n  }\n\n}\ndraw();\n"]}