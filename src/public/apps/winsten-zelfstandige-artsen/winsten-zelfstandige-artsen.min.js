function viz(){var t={};d3.formatDefaultLocale({decimal:",",thousands:".",grouping:[3],currency:["€",""]});var e=d3.format(",.1f"),n=["#C956CD","#75D44B","#CB472E","#80B9CC","#4E3C25","#672F5C","#71D39F","#C48A3A","#6F6FC7","#557B3D","#C897BE","#C5BE9B","#D1457F","#CACC4F","#AF5D58","#435164"],a=d3.select("#viz").append("div").attr("id","lines-container"),r=d3.select("#viz").append("div").attr("id","animation-container"),i=10,c=20,s=30,l=40,d=670-l-c,o=320-i-s,u=a.append("div").attr("id","lines-svg-container").style("padding-bottom",100*(o+i+s)/(d+l+c)+"%").append("svg").attr("viewBox","0 0 "+(d+l+c)+" "+(o+i+s)).append("g").attr("id","lines").attr("transform","translate("+l+", "+i+")"),p=0,f=20,h=87,x=120,v=670-x-f,m=367-p-h,g=100*(m+p+h)/(v+x+f)+"%",k=r.append("div").attr("id","animation-svg-container").style("padding-bottom",g).append("svg").attr("viewBox","0 0 "+(v+x+f)+" "+(m+p+h)).append("g").attr("id","animation").attr("transform","translate("+x+", "+p+")"),b=(a.insert("div","#lines-svg-container").attr("id","select-deselect-all").append("label").text("selecteer/deselecteer alles").append("input").attr("class","w3-check").attr("type","checkbox").on("click",function(){var t=d3.select(this);t.attr("checked")?(t.attr("checked",null),d3.selectAll("#checkboxes-container input").attr("checked",null),d3.selectAll("#line-pathes path").classed("colored",!1).style("stroke","#ddd").style("stroke-width",1),d3.selectAll("#numbers-container .numbers").classed("visible",!1)):(t.attr("checked",!0),d3.selectAll("#checkboxes-container input").attr("checked",!0),d3.selectAll("#line-pathes path").classed("colored",!0).style("stroke",function(t,e){return n[e]}).style("stroke-width",2),d3.selectAll("#numbers-container .numbers").classed("visible",!0))}),a.insert("div","#lines-svg-container").attr("id","checkboxes-container").append("ul"));t.appendCheckboxes=function(e){var a=b.selectAll("li").data(e).enter().append("li").on("click",function(e){t.updateLine(e.Specialisme);var n=d3.select(this).select("input");n.attr("checked")?n.attr("checked",null):n.attr("checked",!0)});a.append("input").attr("class","w3-check").attr("type","checkbox").attr("value",function(t){return t.Specialisme}).style("pointer-events","none"),a.append("div").attr("class",function(t){return"colorbox "+t.Specialisme.toLowerCase()}).style("background-color",function(t,e){return n[e]}),a.append("label").text(function(t){return t.Specialisme})};a.insert("div","#lines-svg-container").attr("id","show-hide-numbers").append("label").text("toon/verberg cijfers").append("input").attr("class","w3-check").attr("type","checkbox").on("click",function(){var t=d3.select("#numbers-container");t.classed("hidden")?t.classed("hidden",!1):t.classed("hidden",!0)});t.enterLines=function(t,n){var a=d3.scaleBand().domain(n).range([0,d]),r=d3.axisBottom(a).tickSizeInner(6).tickSizeOuter(0),i=(u.append("g").attr("class","x-axis").attr("transform","translate(0, "+o+")").call(r),d3.scaleLinear().domain([0,450]).range([o,0])),c=d3.axisLeft(i).tickSize(6),s=(u.append("g").attr("class","y-axis").call(c),d3.line().x(function(t){return a(t.key)+a.bandwidth()/2}).y(function(t){return i(t.value)}));u.append("g").attr("id","line-pathes").selectAll(".line").data(t).enter().append("path").attr("id",function(t){return"line-"+t.Specialisme.toLowerCase()}).attr("class","line").datum(function(t){return d3.entries(t).filter(function(t){return"Specialisme"!==t.key})}).style("stroke","#ddd").style("fill","none").attr("d",function(t){return s(t)}),u.append("g").attr("id","numbers-container").selectAll(".numbers").data(t).enter().append("g").attr("class",function(t){return"numbers "+t.Specialisme.toLowerCase()}).selectAll("text").data(function(t){return d3.entries(t).filter(function(t){return"Specialisme"!==t.key})}).enter().append("text").attr("x",function(t){return a(t.key)+a.bandwidth()/2}).attr("y",function(t){return i(+t.value)}).attr("dy",-5).style("text-anchor","middle").text(function(t){return e(+t.value)})},t.updateLine=function(t){var e=d3.select(".colorbox."+t.toLowerCase()).style("background-color"),n=d3.select("#line-"+t.toLowerCase()),a=d3.select("#numbers-container ."+t.toLowerCase());n.classed("colored")?(n.classed("colored",!1).style("stroke","#ddd").style("stroke-width",1),a.classed("visible",!1)):(n.classed("colored",!0).style("stroke",e).style("stroke-width",2),a.classed("visible",!0))};var y,w,S=r.insert("div","#animation-svg-container").attr("id","start-button").append("button").attr("class","w3-button w3-dark-gray").text("Start animatie"),C=r.append("div").attr("id","animation-select-menu").append("select").attr("class","w3-select").on("change",function(){F(this.value)});t.slider=function(t){function e(t){i||(i=setTimeout(function(){i=void 0,function(t){var e=Math.floor(t/w.bandwidth());e<0?(e=0,y.attr("cx",w.range()[0])):e>a.length-1?(e=a.length-1,y.attr("cx",w.range()[1])):y.attr("cx",t);var n=a[e];n!==c&&(c=n,F(n))}(t)},66))}var n=v,a=t;w=d3.scaleBand().domain(a).rangeRound([0,n]);var r=k.append("g").attr("id","slider").attr("transform","translate(-60,"+(m+h-37)+")");r.append("line").attr("class","track").attr("x1",w.range()[0]).attr("x2",w.range()[1]).select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","track-inset").select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","track-overlay").call(d3.drag().on("start.interrupt",function(){return r.interrupt()}).on("start drag",function(){e(d3.event.x)})),r.insert("g",".track-overlay").attr("class","ticks").attr("transform","translate(0,33)").selectAll("text").data(w.domain()).enter().append("text").attr("x",function(t){return w(t)+w.bandwidth()/2}).attr("text-anchor","middle").text(function(t){return t}),y=r.insert("circle",".track-overlay").attr("class","handle").attr("r",15).attr("cx",w("2009")+w.bandwidth()/2);var i,c="2009"},t.selectMenuOptions=function(t){C.selectAll("option").data(t).enter().append("option").attr("value",function(t){return t}).text(function(t){return t})};var A,B=k.append("g").attr("id","animation-dotted-lines"),L=k.append("g").attr("id","bars"),z=d3.scaleLinear().domain([0,450]).range([0,v]);t.enterBars=function(t){var n=t.map(function(t){return t.Specialisme}),a=d3.scaleBand().domain(n).rangeRound([0,m]).paddingInner(.3),r=d3.axisBottom(z).tickSize(6);k.append("g").attr("class","x-axis").attr("transform","translate(0, "+m+")").call(r).append("text").attr("x",v).attr("y",-4).style("text-anchor","end").text("winst x €1000");var i=d3.axisLeft(a).tickSizeInner(6).tickSizeOuter(0);k.append("g").attr("class","y-axis").call(i);B.selectAll("line").data(t).enter().append("line").attr("x1",0).attr("y1",function(t){return a(t.Specialisme)+a.bandwidth()/2}).attr("x2",function(t){return z(+t[2009])}).attr("y2",function(t){return a(t.Specialisme)+a.bandwidth()/2}),L.selectAll("rect").data(t).enter().append("rect").attr("x",0).attr("y",function(t){return a(t.Specialisme)}).attr("height",a.bandwidth()).attr("width",function(t){return z(+t[2009])}),A=L.append("g").attr("id","bar-labels").selectAll("text").data(t).enter().append("text").attr("y",function(t){return a(t.Specialisme)+9}).attr("x",function(t){return z(+t[2009])}).attr("dx",-6).text(function(t){return e(+t[2009])});k.append("g").attr("id","maximum-circles").selectAll("circle").data(t).enter().append("circle").attr("r",5).attr("cx",function(t){return z(+t[2009])}).attr("cy",function(t){return a(t.Specialisme)+a.bandwidth()/2})},t.updateBars=function(t,n){void 0===n&&(n=0),L.selectAll("rect").transition().duration(n).attr("width",function(e){return z(+e[t])}),A.transition().duration(n).attr("x",function(e){return z(+e[t])}).text(function(n){return e(+n[t])})};var D=function(t){C.property("value",t)},F=function(e){t.updateBars(e,500),D(e),function(t){y.attr("cx",w(t)+w.bandwidth()/2)}(e)},E=k.append("g").attr("id","animation-legend").attr("transform","translate("+v+", 15)"),N=E.append("text").attr("x",0).attr("y",0).attr("text-anchor","end").text("winst in 2009").node().getBBox().width;E.append("circle").attr("cx",-N-10).attr("cy",-3.5).attr("r",5);var O;return t.getData=function(){d3.csv("winsten-zelfstandige-artsen.csv",function(e,n){var a=d3.keys(n[0]).filter(function(t){return"Specialisme"!==t});t.appendCheckboxes(n);d3.selectAll("#checkboxes-container input").filter('input[value="Huisarts"], input[value="Radioloog"]').attr("checked",!0),d3.select("#show-hide-numbers input").attr("checked",!0),t.enterLines(n,a),["Huisarts","Radioloog"].forEach(function(e){return t.updateLine(e)}),t.slider(a),t.selectMenuOptions(a),D("2009"),t.enterBars(n),S.on("click",function(){S.classed("running")?(S.classed("running",!1),S.text("Start animatie"),O.stop()):(S.classed("running",!0),S.text("Stop animatie"),function(t){var e=t.length-1,n=0;F(t[n]),n++,O=d3.interval(function(){F(t[n]),++n>e&&(O.stop(),d3.timeout(function(){S.text("Start animatie"),S.classed("running",!1)},1200))},1e3)}(a))})})},t}viz().getData();
//# sourceMappingURL=winsten-zelfstandige-artsen.min.js.map
